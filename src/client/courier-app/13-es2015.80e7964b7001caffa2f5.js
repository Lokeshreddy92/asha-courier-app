(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{hGdz:function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),a=n("LPYB"),o=n("rhD1"),c=n("3Pt+"),r=n("tyNb"),s=n("0IaG"),l=n("FtGj"),d=n("dNgK"),b=n("fXoL"),m=n("lJxs"),g=n("dMDw"),p=n("AytR"),u=n("tk/3"),f=n("qXBG");const h=p.a.apiUrl+"/users",C=p.a.apiUrl+"/projects";let v=(()=>{class t{constructor(t,e,n){this.http=t,this.router=e,this.authService=n}getProjects(t,e,n){var i=`?pagesize=${t}&page=${e}`;return n&&(i+="&search="+n),this.http.get(C+"/getprojects"+i)}addProject(t,e){const n={project_name:t.project_name,project_desc:t.project_desc,assignedUsers:t.assignedUsers,userId:this.authService.getUserId()};return this.http.post(C+"/create",n)}getProjectById(t){return this.http.get(C+"/"+t)}updateProject(t,e){return this.http.put(C+"/"+t._id,{id:t._id,project_name:t.project_name,project_desc:e.project_desc,assignedUsers:e.assignedUsers})}deleteProject(t){return this.http.delete(C+"/"+t)}search(t){var e="?";return t&&(e+="search="+t),this.http.get(h+"/search"+e).pipe(Object(g.debounceTime)(500),Object(m.a)(t=>t))}}return t.\u0275fac=function(e){return new(e||t)(b.fc(u.b),b.fc(r.b),b.fc(f.a))},t.\u0275prov=b.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _=n("kmnG"),k=n("qFsG"),W=n("/1cH"),X=n("bTqV"),M=n("NFeN"),T=n("A5z7"),P=n("FKr1");const O=["assigneeInput"],y=["auto"];function x(t,e){1&t&&(b.Xb(0,"h1",19),b.Tc(1,"Edit Project"),b.Wb())}function I(t,e){1&t&&(b.Xb(0,"h1",19),b.Tc(1,"Create Project"),b.Wb())}function w(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please Enter Project Name."),b.Wb())}function j(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please Enter Project Description."),b.Wb())}function S(t,e){1&t&&(b.Xb(0,"mat-icon",28),b.Tc(1,"cancel"),b.Wb())}function R(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-chip",26),b.jc("removed",(function(){b.Kc(t);const n=e.$implicit;return b.nc(2).remove(n)})),b.Tc(1),b.Rc(2,S,2,0,"mat-icon",27),b.Wb()}if(2&t){const t=e.$implicit,n=b.nc(2);b.vc("selectable",n.selectable)("removable",n.removable),b.Cb(1),b.Wc(" ",t.first_name," ",t.last_name," "),b.Cb(1),b.vc("ngIf",n.removable)}}function U(t,e){if(1&t){const t=b.Yb();b.Xb(0,"div",20),b.Xb(1,"div",21),b.Xb(2,"mat-icon",22),b.Tc(3,"group"),b.Wb(),b.Xb(4,"mat-label"),b.Tc(5,"Assigned Users"),b.Wb(),b.Sb(6,"br"),b.Wb(),b.Xb(7,"div",21),b.Xb(8,"input",23),b.jc("ngModelChange",(function(e){return b.Kc(t),b.nc().project.assignedUsers=e})),b.Wb(),b.Xb(9,"mat-chip-list",null,24),b.Rc(11,R,3,5,"mat-chip",25),b.Wb(),b.Wb(),b.Wb()}if(2&t){const t=b.nc();b.Cb(8),b.vc("ngModel",t.project.assignedUsers),b.Cb(3),b.vc("ngForOf",t.project.assignedUsers)}}function D(t,e){if(1&t&&(b.Xb(0,"mat-option",29,30),b.Tc(2),b.Wb()),2&t){const t=e.$implicit;b.vc("value",t),b.Cb(2),b.Wc(" ",t.first_name," ",t.last_name," ")}}let F=(()=>{class t{constructor(t,e,n,i,a,o,r){this.projectsService=t,this.dialogRef=e,this.route=n,this._snackBar=i,this.router=a,this.dialog=o,this.visible=!0,this.selectable=!0,this.removable=!0,this.separatorKeysCodes=[l.g,l.c],this.fruitCtrl=new c.d,this.isLoading=!0,this.project=[],this.data=[],this.horizontalPos="right",this.verticalPos="top",this.sankBardata={},this.assignedUsers=[],this.isEdit=!0,this.toppingList=["Extra cheese","Mushroom","Onion","Pepperoni","Sausage","Tomato"],this.data=r,this.project={_id:"",project_name:"",project_desc:"",assignedUsers:[]}}ngOnInit(){this.data.id&&"edit"==this.data.mode?this.projectsService.getProjectById(this.data.id).subscribe(t=>{this.isLoading=!1,this.isEdit=!0,this.mode="edit",console.log("ttt",t),this.project={_id:t.data[0]._id,project_name:t.data[0].project_name,project_desc:t.data[0].project_desc,assignedUsers:t.data[0].assignedUsers}}):(this.isLoading=!1,this.mode="create",this.isEdit=!1,this.userId=null)}onSave(t){t.invalid||(this.isLoading=!0,"create"===this.mode?this.projectsService.addProject(t.value,this.userId).subscribe(t=>{this.dialogRef.close()},t=>{this.isLoading=!1}):this.projectsService.updateProject(this.project,t.value).subscribe(t=>{this.dialogRef.close()},t=>{this.isLoading=!1}))}searchUsers(t){t&&this.projectsService.search(t).subscribe(t=>{this.searchUser=t.users})}displayFn(t){return t?t.first_name+" "+t.last_name:""}onSelection(t){const e=t.option.value;let n=this.project.assignedUsers.findIndex(t=>t._id===e._id);console.log(n,e),-1==n?(this.project.assignedUsers.push(t.option.value),this.assigneeInput.nativeElement.value="",this.fruitCtrl.setValue(null)):(this.sankBardata.message="User Allready Exist in this Project.",this.openSnakBar(),this.fruitCtrl.setValue(null))}selected(t){this.project.assignedUsers.push(t.option.viewValue),this.project.assignedUsers.nativeElement.value="",this.project.assignedUsers.setValue(null)}remove(t){const e=this.project.assignedUsers.indexOf(t);e>=0&&this.project.assignedUsers.splice(e,1)}close(){this.dialogRef.close()}openSnakBar(){let t=new d.b;t.verticalPosition=this.verticalPos,t.horizontalPosition=this.horizontalPos,t.duration=8e3,this._snackBar.open(this.sankBardata.message,"Ok",t)}}return t.\u0275fac=function(e){return new(e||t)(b.Rb(v),b.Rb(s.h),b.Rb(r.a),b.Rb(d.a),b.Rb(r.b),b.Rb(s.b),b.Rb(s.a))},t.\u0275cmp=b.Lb({type:t,selectors:[["app-create-project"]],viewQuery:function(t,e){var n;1&t&&(b.Zc(O,!0),b.Zc(y,!0)),2&t&&(b.Fc(n=b.kc())&&(e.assigneeInput=n.first),b.Fc(n=b.kc())&&(e.matAutocomplete=n.first))},decls:35,vars:14,consts:[["mat-dialog-title","",4,"ngIf"],[3,"submit"],["projectForm","ngForm"],["mat-dialog-content","",1,"font"],["appearance","outline"],["matInput","","name","project_name","type","text","placeholder","Project Name","required","",3,"disabled","ngModel","ngModelChange"],["nameInput","ngModel"],[4,"ngIf"],["matInput","","name","project_desc","type","text","placeholder","Description","required","",3,"ngModel","ngModelChange"],["descInput","ngModel"],["class","container",4,"ngIf"],["type","text","matInput","","placeholder","New User...",3,"matAutocomplete","formControl","keyup"],["assigneeInput","","assigneeInput",""],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-card-actions","","align","end"],["mat-raised-button","","color","primary","matDialogClose","",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-dialog-title",""],[1,"container"],[1,"row"],["md-list-icon",""],["type","hidden","name","assignedUsers",3,"ngModel","ngModelChange"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"],["datae",""]],template:function(t,e){if(1&t){const t=b.Yb();b.Rc(0,x,2,0,"h1",0),b.Rc(1,I,2,0,"h1",0),b.Xb(2,"form",1,2),b.jc("submit",(function(){b.Kc(t);const n=b.Gc(3);return e.onSave(n)})),b.Xb(4,"div",3),b.Xb(5,"mat-form-field",4),b.Xb(6,"mat-label"),b.Tc(7,"Project Name"),b.Wb(),b.Xb(8,"input",5,6),b.jc("ngModelChange",(function(t){return e.project.project_name=t})),b.Wb(),b.Rc(10,w,2,0,"mat-error",7),b.Wb(),b.Xb(11,"mat-form-field",4),b.Xb(12,"mat-label"),b.Tc(13,"Description"),b.Wb(),b.Xb(14,"textarea",8,9),b.jc("ngModelChange",(function(t){return e.project.project_desc=t})),b.Tc(16),b.Wb(),b.Rc(17,j,2,0,"mat-error",7),b.Wb(),b.Rc(18,U,12,2,"div",10),b.Sb(19,"br"),b.Xb(20,"mat-form-field",4),b.Xb(21,"mat-label"),b.Tc(22,"Assign Users"),b.Wb(),b.Xb(23,"input",11,12),b.jc("keyup",(function(){b.Kc(t);const n=b.Gc(24);return e.searchUsers(n.value)})),b.Wb(),b.Xb(26,"mat-autocomplete",13,14),b.jc("optionSelected",(function(t){return e.onSelection(t)})),b.Rc(28,D,3,3,"mat-option",15),b.Wb(),b.Wb(),b.Wb(),b.Xb(29,"div",16),b.Xb(30,"button",17),b.jc("click",(function(){return e.close()})),b.Tc(31,"Close"),b.Wb(),b.Tc(32,"\xa0 "),b.Xb(33,"button",18),b.Tc(34,"Save"),b.Wb(),b.Wb(),b.Wb()}if(2&t){const t=b.Gc(3),n=b.Gc(9),i=b.Gc(15),a=b.Gc(27);b.vc("ngIf","edit"==e.mode),b.Cb(1),b.vc("ngIf","create"==e.mode),b.Cb(7),b.vc("disabled",e.isEdit)("ngModel",e.project.project_name),b.Cb(2),b.vc("ngIf",n.hasError("required")),b.Cb(4),b.vc("ngModel",e.project.project_desc),b.Cb(2),b.Uc(e.project.project_desc),b.Cb(1),b.vc("ngIf",i.hasError("required")),b.Cb(1),b.vc("ngIf",e.project.assignedUsers.length>0),b.Cb(5),b.vc("matAutocomplete",a)("formControl",e.fruitCtrl),b.Cb(3),b.vc("displayWith",e.displayFn),b.Cb(2),b.vc("ngForOf",e.searchUser),b.Cb(5),b.vc("disabled",e.isLoading||t.invalid)}},directives:[i.m,c.x,c.n,c.o,s.f,_.c,_.g,k.b,c.b,c.u,c.m,c.p,W.c,c.e,W.a,i.l,X.b,s.d,s.i,_.b,M.a,T.b,T.a,T.c,P.o],styles:[".form[_ngcontent-%COMP%]{line-height:normal}mat-form-field[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}mat-spinner[_ngcontent-%COMP%]{margin:auto}.image-preview[_ngcontent-%COMP%]{height:5rem;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.select_role[_ngcontent-%COMP%]{width:auto}.btn-success[_ngcontent-%COMP%]:hover{color:#0747a6!important;background-color:#fff!important;border-color:#0747a6!important}.btn-success[_ngcontent-%COMP%]{color:#fff!important;background-color:#0747a6!important;border-color:#0747a6!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#fff!important;color:#f89b46}.mat-raised-button[disabled][_ngcontent-%COMP%]:not([class*=mat-elevation-z]){color:#b3b7bd!important;background-color:#fff!important;border-color:red!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important}.example-additional-selection[_ngcontent-%COMP%]{opacity:.75;font-size:.75em}.assign_btn[_ngcontent-%COMP%]{padding:0 28px;margin:11px}"]}),t})();function L(t,e){if(1&t&&(b.Xb(0,"mat-chip"),b.Tc(1),b.Wb()),2&t){const t=e.$implicit;b.Cb(1),b.Wc(" ",t.first_name," ",t.last_name," ")}}function A(t,e){if(1&t&&(b.Xb(0,"div",10),b.Xb(1,"div",11),b.Xb(2,"mat-icon",12),b.Tc(3,"group"),b.Wb(),b.Xb(4,"mat-label"),b.Tc(5,"Assigned Users"),b.Wb(),b.Sb(6,"br"),b.Wb(),b.Xb(7,"div",11),b.Xb(8,"mat-chip-list",null,13),b.Rc(10,L,2,2,"mat-chip",14),b.Wb(),b.Wb(),b.Wb()),2&t){const t=b.nc(2);b.Cb(10),b.vc("ngForOf",t.project.assignedUsers)}}function z(t,e){if(1&t&&(b.Xb(0,"mat-form-field",5),b.Xb(1,"mat-label"),b.Tc(2,"Created By"),b.Wb(),b.Sb(3,"input",6),b.Wb()),2&t){const t=b.nc(2);b.Cb(3),b.yc("value","",t.project.userId.first_name," ",t.project.userId.last_name,"")}}function E(t,e){if(1&t&&(b.Xb(0,"mat-form-field",5),b.Xb(1,"mat-label"),b.Tc(2,"Email"),b.Wb(),b.Sb(3,"input",6),b.Wb()),2&t){const t=b.nc(2);b.Cb(3),b.wc("value",t.project.userId.email)}}function $(t,e){if(1&t&&(b.Xb(0,"mat-form-field",5),b.Xb(1,"mat-label"),b.Tc(2,"updated By"),b.Wb(),b.Sb(3,"input",6),b.Wb()),2&t){const t=b.nc(2);b.Cb(3),b.yc("value","",t.project.updatedBy.first_name," ",t.project.userId.last_name,"")}}function B(t,e){if(1&t&&(b.Xb(0,"div",4),b.Xb(1,"mat-form-field",5),b.Xb(2,"mat-label"),b.Tc(3,"Project Name"),b.Wb(),b.Sb(4,"input",6),b.Wb(),b.Xb(5,"mat-form-field",5),b.Xb(6,"mat-label"),b.Tc(7,"Project Description"),b.Wb(),b.Xb(8,"textarea",7),b.Tc(9),b.Wb(),b.Wb(),b.Rc(10,A,11,1,"div",8),b.Sb(11,"br"),b.Rc(12,z,4,2,"mat-form-field",9),b.Rc(13,E,4,1,"mat-form-field",9),b.Rc(14,$,4,2,"mat-form-field",9),b.Xb(15,"mat-form-field",5),b.Xb(16,"mat-label"),b.Tc(17,"Created At"),b.Wb(),b.Sb(18,"input",6),b.oc(19,"date"),b.Wb(),b.Xb(20,"mat-form-field",5),b.Xb(21,"mat-label"),b.Tc(22,"Updated At"),b.Wb(),b.Sb(23,"input",6),b.oc(24,"date"),b.Wb(),b.Xb(25,"mat-form-field",5),b.Xb(26,"mat-label"),b.Tc(27,"Status"),b.Wb(),b.Sb(28,"input",6),b.Wb(),b.Wb()),2&t){const t=b.nc();b.Cb(4),b.wc("value",t.project.project_name),b.Cb(5),b.Uc(t.project.project_desc),b.Cb(1),b.vc("ngIf",t.project.assignedUsers.length>0),b.Cb(2),b.vc("ngIf",t.project.userId),b.Cb(1),b.vc("ngIf",t.project.userId),b.Cb(1),b.vc("ngIf",t.project.userId),b.Cb(4),b.wc("value",b.pc(19,9,t.project.createdAt)),b.Cb(5),b.wc("value",b.pc(24,11,t.project.updatedAt)),b.Cb(5),b.wc("value",t.project.status)}}let q=(()=>{class t{constructor(t,e,n,i,a,o){this.projectsService=t,this.route=e,this.dialogRef=n,this.router=i,this.dialog=a,this.isLoading=!0,this.project=[],this.data=[],this.sankBardata={},this.assignedUsers=[],this.isEdit=!0,this.toppingList=["Extra cheese","Mushroom","Onion","Pepperoni","Sausage","Tomato"],this.data=o}ngOnInit(){this.isLoading=!0,this.projectsService.getProjectById(this.data.id).subscribe(t=>{this.isLoading=!1,this.project=t.data[0]})}close(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(b.Rb(v),b.Rb(r.a),b.Rb(s.h),b.Rb(r.b),b.Rb(s.b),b.Rb(s.a))},t.\u0275cmp=b.Lb({type:t,selectors:[["app-project-info"]],decls:8,vars:1,consts:[["mat-dialog-title",""],["class","font","mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-dialog-content","",1,"font"],["appearance","outline"],["matInput","","readonly","",3,"value"],["matInput","","type","text","readonly",""],["class","container",4,"ngIf"],["appearance","outline",4,"ngIf"],[1,"container"],[1,"row"],["md-list-icon",""],["chipList",""],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(b.Xb(0,"div"),b.Xb(1,"h2",0),b.Tc(2,"Project Info"),b.Wb(),b.Wb(),b.Rc(3,B,29,13,"div",1),b.Xb(4,"div",2),b.Xb(5,"button",3),b.jc("click",(function(){return e.close()})),b.Tc(6,"Close"),b.Wb(),b.Tc(7,"\xa0 "),b.Wb()),2&t&&(b.Cb(3),b.vc("ngIf",!e.isLoading))},directives:[s.i,i.m,s.c,X.b,s.f,_.c,_.g,k.b,M.a,T.b,i.l,T.a],pipes:[i.e],styles:[".form[_ngcontent-%COMP%]{line-height:normal}.mat-card[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}.mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:16px;border-radius:4px;height:auto;min-height:598px}mat-spinner[_ngcontent-%COMP%]{margin:auto}.image-preview[_ngcontent-%COMP%]{height:5rem;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.select_role[_ngcontent-%COMP%]{width:auto}.btn-success[_ngcontent-%COMP%]:hover{color:#0747a6!important;background-color:#fff!important;border-color:#0747a6!important}.btn-success[_ngcontent-%COMP%]{color:#fff!important;background-color:#0747a6!important;border-color:#0747a6!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#fff!important;color:#f89b46}.mat-raised-button[disabled][_ngcontent-%COMP%]:not([class*=mat-elevation-z]){color:#b3b7bd!important;background-color:#fff!important;border-color:red!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important}"]}),t})();var K=n("Wp6s"),G=n("Qu3c"),V=n("Xa2L"),N=n("M9IT");function Y(t,e){if(1&t){const t=b.Yb();b.Xb(0,"button",11),b.jc("click",(function(){return b.Kc(t),b.nc().openDialog(0,"create")})),b.Tc(1,"+ New Project"),b.Wb()}}function H(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-icon",20),b.jc("click",(function(){b.Kc(t);const e=b.nc().$implicit;return b.nc().openDialog(e._id,"edit")})),b.Tc(1,"edit"),b.Wb()}}function Z(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-icon",21),b.jc("click",(function(){b.Kc(t);const e=b.nc().$implicit;return b.nc().onDelete(e._id)})),b.Tc(1,"delete"),b.Wb()}}const Q=function(t){return["/authorized/tickets",t]};function J(t,e){if(1&t){const t=b.Yb();b.Xb(0,"div",12),b.Xb(1,"mat-card",13),b.Xb(2,"mat-card-header"),b.Sb(3,"div",14),b.Xb(4,"mat-card-title",15),b.Tc(5),b.Wb(),b.Xb(6,"mat-card-subtitle",16),b.Tc(7),b.Wb(),b.Xb(8,"mat-card-actions"),b.Rc(9,H,2,0,"mat-icon",17),b.Rc(10,Z,2,0,"mat-icon",18),b.Xb(11,"mat-icon",19),b.jc("click",(function(){b.Kc(t);const n=e.$implicit;return b.nc().projectInfoDialog(n._id)})),b.Tc(12,"info"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()}if(2&t){const t=e.$implicit,n=b.nc();b.Cb(3),b.vc("routerLink",b.Ac(8,Q,t._id)),b.Cb(1),b.wc("matTooltip",t.project_name),b.vc("routerLink",b.Ac(10,Q,t._id)),b.Cb(1),b.Uc(t.project_name),b.Cb(1),b.wc("matTooltip",t.project_desc),b.Cb(1),b.Uc(t.project_desc),b.Cb(2),b.vc("ngIf",3!=n.userData.role),b.Cb(1),b.vc("ngIf",3!=n.userData.role)}}function tt(t,e){1&t&&(b.Xb(0,"div",22),b.Xb(1,"p",23),b.Tc(2,"No Projects Found!"),b.Wb(),b.Wb())}function et(t,e){1&t&&b.Sb(0,"mat-progress-spinner",24)}function nt(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-paginator",25),b.jc("page",(function(e){return b.Kc(t),b.nc().onChangedPage(e)})),b.Wb()}if(2&t){const t=b.nc();b.vc("length",t.Count)("pageSize",t.perPage)("pageSizeOptions",t.sizeOptions)}}let it=(()=>{class t{constructor(t,e,n,i,a){this.projectsService=t,this.route=e,this.authService=n,this.dialog=i,this.router=a,this.projects=[],this.isLoading=!1,this.perPage=10,this.currentPage=1,this.Count=0,this.sizeOptions=[10,20,50],this.displayedColumns1=["Project Name","Description","Action"]}ngOnInit(){this.isLoading=!0,this.userData=this.authService.getUserData(),this.projectsService.getProjects(this.perPage,this.currentPage,this.search).subscribe(t=>{this.projects=t.data,this.isLoading=!1,this.Count=t.count})}onDelete(t){this.projectsService.deleteProject(t).subscribe(t=>{this.ngOnInit()})}onSearch(){this.ngOnInit()}onChangedPage(t){this.isLoading=!0,this.currentPage=t.pageIndex+1,this.perPage=t.pageSize,this.ngOnInit()}openDialog(t,e){const n=new s.e;n.disableClose=!0,n.autoFocus=!0,n.width="598px",n.data={id:t,mode:e},this.dialog.open(F,n).afterClosed().subscribe(t=>{this.ngOnInit()})}projectInfoDialog(t){const e=new s.e;e.disableClose=!1,e.autoFocus=!0,e.width="598px",e.data={id:t},this.dialog.open(q,e).afterClosed().subscribe(t=>{this.ngOnInit()})}}return t.\u0275fac=function(e){return new(e||t)(b.Rb(v),b.Rb(r.a),b.Rb(f.a),b.Rb(s.b),b.Rb(r.b))},t.\u0275cmp=b.Lb({type:t,selectors:[["app-projects"]],decls:16,vars:6,consts:[[1,"card-container"],["action","#","autocomplete","off"],[2,"width","45%"],["matInput","","name","name","type","text","placeholder","Search",3,"ngModel","ngModelChange","keyup"],["nameInput","ngModel"],["md-list-icon",""],["class","btn btn-success float-right",3,"click",4,"ngIf"],["style","margin: 5px;",4,"ngFor","ngForOf"],["style","text-align: center;",4,"ngIf"],["class","example-margin","mode","indeterminate","diameter","40","value","20",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],[1,"btn","btn-success","float-right",3,"click"],[2,"margin","5px"],[1,"example-card"],["mat-card-avatar","","matTooltip","View Project Tickets",1,"example-header-image",3,"routerLink"],[3,"matTooltip","routerLink"],[3,"matTooltip"],["md-list-icon","","color","primary","matTooltip","Edit Project",3,"click",4,"ngIf"],["matTooltip","Delete Project","color","warn","md-list-icon","",3,"click",4,"ngIf"],["matTooltip","Project Info","md-list-icon","",3,"click"],["md-list-icon","","color","primary","matTooltip","Edit Project",3,"click"],["matTooltip","Delete Project","color","warn","md-list-icon","",3,"click"],[2,"text-align","center"],[1,"info-text","mat-body-1"],["mode","indeterminate","diameter","40","value","20",1,"example-margin"],[3,"length","pageSize","pageSizeOptions","page"]],template:function(t,e){1&t&&(b.Xb(0,"div",0),b.Xb(1,"mat-card"),b.Xb(2,"form",1),b.Xb(3,"mat-form-field",2),b.Xb(4,"input",3,4),b.jc("ngModelChange",(function(t){return e.search=t}))("keyup",(function(){return e.onSearch()})),b.Wb(),b.Wb(),b.Xb(6,"mat-icon",5),b.Tc(7,"search"),b.Wb(),b.Rc(8,Y,2,0,"button",6),b.Wb(),b.Wb(),b.Wb(),b.Sb(9,"br"),b.Sb(10,"br"),b.Xb(11,"div",0),b.Rc(12,J,13,12,"div",7),b.Rc(13,tt,3,0,"div",8),b.Rc(14,et,1,0,"mat-progress-spinner",9),b.Rc(15,nt,1,3,"mat-paginator",10),b.Wb()),2&t&&(b.Cb(4),b.vc("ngModel",e.search),b.Cb(4),b.vc("ngIf",3!=e.userData.role),b.Cb(4),b.vc("ngForOf",e.projects),b.Cb(1),b.vc("ngIf",e.projects.length<=0&&!e.isLoading),b.Cb(1),b.vc("ngIf",e.isLoading),b.Cb(1),b.vc("ngIf",e.projects.length>0))},directives:[K.a,c.x,c.n,c.o,_.c,k.b,c.b,c.m,c.p,M.a,i.m,i.l,K.e,K.c,G.a,r.c,K.j,K.i,K.b,V.a,N.a],styles:[".mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:16px;border-radius:4px;height:70px}.btn.focus[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:focus{outline:0;box-shadow:0 0 0 .2rem #fff}.btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .show[_ngcontent-%COMP%] > .btn-success.dropdown-toggle[_ngcontent-%COMP%]{color:#fff;background-color:#f89b46;border-color:#f89b46}.btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .show[_ngcontent-%COMP%] > .btn-success.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #fafafa}.mat-input-element[_ngcontent-%COMP%]:focus{font:inherit;color:#f89b46;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.btn-success[_ngcontent-%COMP%]{color:#f89b46;background-color:#fff;border-color:#f89b46}table[_ngcontent-%COMP%]{margin:27px}mat-paginator[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:98%}.btn-success[_ngcontent-%COMP%]:hover{color:#fff;background-color:#f89b46;border-color:#f89b46}.btn-success.focus[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]:focus{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important;box-shadow:#f89b46!important}.example-card[_ngcontent-%COMP%]{width:100%;margin:15px}.example-card[_ngcontent-%COMP%]:hover{width:100%;background-color:#a09d9d}.example-header-image[_ngcontent-%COMP%]{background-image:url(/assets/proj.jpg);background-size:cover}mat-card-subtitle[_ngcontent-%COMP%], mat-card-title[_ngcontent-%COMP%]{white-space:nowrap;width:105px;overflow:hidden;text-overflow:ellipsis}.example-tooltip-red[_ngcontent-%COMP%]{background:#b71c1c!important}.mat-card[_ngcontent-%COMP%]{background:#fff;width:100%;color:#f89b46;height:90px;min-width:100%}mat-icon[_ngcontent-%COMP%]{margin:9px}"]}),t})();const at=p.a.apiUrl+"/tickets",ot=p.a.apiUrl+"/tasks";let ct=(()=>{class t{constructor(t,e,n){this.http=t,this.router=e,this.authService=n}getTicketsByProjectId(t,e,n,i){var a=`?pagesize=${t}&page=${e}`;return n&&(a+="&search="+n),this.http.get(at+"/gettickets/"+i+a)}getTickets(t,e,n){var i=`?pagesize=${t}&page=${e}`;return n&&(i+="&search="+n),this.http.get(at+"/gettickets"+i)}getUserData(){return this.authService.getUserData()}addTicket(t,e){const n={ticket_name:t.ticket_name,ticket_desc:t.ticket_desc,ticket_priority:t.ticket_priority,projectId:e,userId:this.authService.getUserId()};return this.http.post(at+"/create",n)}getTicketById(t){return this.http.get(at+"/"+t)}updateTicket(t,e){console.log(t);let n={id:t._id,ticket_name:t.ticket_name,ticket_desc:e.ticket_desc,projectId:t.projectId._id,userId:this.authService.getUserId()};return this.http.put(at+"/"+t._id,n)}updateTicketStatus(t){console.log(t);let e={id:t.id,status:t.status,ticket_priority:t.ticket_priority,userId:this.authService.getUserId()};return this.http.put(at+"/updatestatus/"+t.id,e)}deleteTicket(t){return this.http.delete(at+"/"+t)}getTicketTages(t){return this.http.get(ot+"/gettasktages/"+t)}}return t.\u0275fac=function(e){return new(e||t)(b.fc(u.b),b.fc(r.b),b.fc(f.a))},t.\u0275prov=b.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var rt=n("d3UM");function st(t,e){1&t&&(b.Xb(0,"h1",16),b.Tc(1,"Edit Ticket"),b.Wb())}function lt(t,e){1&t&&(b.Xb(0,"h1",16),b.Tc(1,"Create New Ticket"),b.Wb())}function dt(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please Enter Project Name."),b.Wb())}function bt(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please Enter Project Description."),b.Wb())}function mt(t,e){if(1&t&&(b.Xb(0,"mat-option",17),b.Tc(1),b.Wb()),2&t){const t=e.$implicit;b.vc("value",t),b.Cb(1),b.Vc(" ",t," ")}}function gt(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Select Ticket Priority."),b.Wb())}let pt=(()=>{class t{constructor(t,e,n,i,a,o){this.ticketsService=t,this.dialogRef=e,this.route=n,this.router=i,this.dialog=a,this.isLoading=!0,this.ticket=[],this.disablerole=!0,this.data=[],this.isEdit=!0,this.ticket_priority=["High","Medium","Low"],this.data=o,this.ticket={_id:"",ticket_name:"",ticket_desc:"",projectId:{},ticket_priority:""}}ngOnInit(){this.data.id&&"edit"==this.data.mode?this.ticketsService.getTicketById(this.data.id).subscribe(t=>{this.isLoading=!1,this.isEdit=!0,this.mode="edit",this.ticket={_id:t.data[0]._id,ticket_name:t.data[0].ticket_name,ticket_desc:t.data[0].ticket_desc,projectId:t.data[0].projectId,ticket_priority:t.data[0].ticket_priority}}):(this.isLoading=!1,this.mode="create",this.isEdit=!1,this.userId=null)}onSave(t){t.invalid||(this.isLoading=!0,"create"===this.mode?this.ticketsService.addTicket(t.value,this.data.pid).subscribe(t=>{this.dialogRef.close()},t=>{this.isLoading=!1}):this.ticketsService.updateTicket(this.ticket,t.value).subscribe(t=>{this.dialogRef.close()},t=>{this.isLoading=!1}))}close(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(b.Rb(ct),b.Rb(s.h),b.Rb(r.a),b.Rb(r.b),b.Rb(s.b),b.Rb(s.a))},t.\u0275cmp=b.Lb({type:t,selectors:[["app-create-ticket"]],decls:31,vars:11,consts:[["mat-dialog-title","",4,"ngIf"],[3,"submit"],["ticketForm","ngForm"],["mat-dialog-content","",1,"font"],["appearance","outline"],["matInput","","name","ticket_name","type","text","placeholder","ticket Name","required","",3,"ngModel","ngModelChange"],["nameInput","ngModel"],[4,"ngIf"],["matInput","","name","ticket_desc","type","text","placeholder","Description","required","",3,"ngModel","ngModelChange"],["descInput","ngModel"],["name","ticket_priority","placeholder","Select Priority","required","",3,"ngModel","ngModelChange"],["ticketInput","ngModel"],[3,"value",4,"ngFor","ngForOf"],["mat-card-actions","","align","end"],["mat-raised-button","","color","primary","matDialogClose","",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-dialog-title",""],[3,"value"]],template:function(t,e){if(1&t){const t=b.Yb();b.Rc(0,st,2,0,"h1",0),b.Rc(1,lt,2,0,"h1",0),b.Xb(2,"form",1,2),b.jc("submit",(function(){b.Kc(t);const n=b.Gc(3);return e.onSave(n)})),b.Xb(4,"div",3),b.Xb(5,"mat-form-field",4),b.Xb(6,"mat-label"),b.Tc(7,"Ticket"),b.Wb(),b.Xb(8,"input",5,6),b.jc("ngModelChange",(function(t){return e.ticket.ticket_name=t})),b.Wb(),b.Rc(10,dt,2,0,"mat-error",7),b.Wb(),b.Xb(11,"mat-form-field",4),b.Xb(12,"mat-label"),b.Tc(13,"Description"),b.Wb(),b.Xb(14,"textarea",8,9),b.jc("ngModelChange",(function(t){return e.ticket.ticket_desc=t})),b.Tc(16),b.Wb(),b.Rc(17,bt,2,0,"mat-error",7),b.Wb(),b.Xb(18,"mat-form-field",4),b.Xb(19,"mat-label"),b.Tc(20,"Ticket Priority"),b.Wb(),b.Xb(21,"mat-select",10,11),b.jc("ngModelChange",(function(t){return e.ticket.ticket_priority=t})),b.Rc(23,mt,2,2,"mat-option",12),b.Wb(),b.Rc(24,gt,2,0,"mat-error",7),b.Wb(),b.Wb(),b.Xb(25,"div",13),b.Xb(26,"button",14),b.jc("click",(function(){return e.close()})),b.Tc(27,"Close"),b.Wb(),b.Tc(28,"\xa0 "),b.Xb(29,"button",15),b.Tc(30,"Save"),b.Wb(),b.Wb(),b.Wb()}if(2&t){const t=b.Gc(3),n=b.Gc(9),i=b.Gc(15),a=b.Gc(22);b.vc("ngIf","edit"==e.mode),b.Cb(1),b.vc("ngIf","create"==e.mode),b.Cb(7),b.vc("ngModel",e.ticket.ticket_name),b.Cb(2),b.vc("ngIf",n.hasError("required")),b.Cb(4),b.vc("ngModel",e.ticket.ticket_desc),b.Cb(2),b.Uc(e.ticket.ticket_desc),b.Cb(1),b.vc("ngIf",i.hasError("required")),b.Cb(4),b.vc("ngModel",e.ticket.ticket_priority),b.Cb(2),b.vc("ngForOf",e.ticket_priority),b.Cb(1),b.vc("ngIf",a.hasError("required")),b.Cb(5),b.vc("disabled",t.invalid)}},directives:[i.m,c.x,c.n,c.o,s.f,_.c,_.g,k.b,c.b,c.u,c.m,c.p,rt.a,i.l,X.b,s.d,s.i,_.b,P.o],styles:[".form[_ngcontent-%COMP%]{line-height:normal}mat-form-field[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}mat-spinner[_ngcontent-%COMP%]{margin:auto}.image-preview[_ngcontent-%COMP%]{height:5rem;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.select_role[_ngcontent-%COMP%]{width:auto}.btn-success[_ngcontent-%COMP%]:hover{color:#0747a6!important;background-color:#fff!important;border-color:#0747a6!important}.btn-success[_ngcontent-%COMP%]{color:#fff!important;background-color:#0747a6!important;border-color:#0747a6!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#fff!important;color:#f89b46}.mat-raised-button[disabled][_ngcontent-%COMP%]:not([class*=mat-elevation-z]){color:#b3b7bd!important;background-color:#fff!important;border-color:red!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important}"]}),t})();function ut(t,e){if(1&t&&(b.Xb(0,"mat-chip"),b.Tc(1),b.Wb()),2&t){const t=e.$implicit;b.Cb(1),b.Wc(" ",t.first_name," ",t.last_name," ")}}function ft(t,e){if(1&t&&(b.Xb(0,"div",9),b.Xb(1,"div",10),b.Xb(2,"mat-icon",11),b.Tc(3,"group"),b.Wb(),b.Xb(4,"mat-label"),b.Tc(5,"Assigned Users"),b.Wb(),b.Sb(6,"br"),b.Wb(),b.Xb(7,"div",10),b.Xb(8,"mat-chip-list",null,12),b.Rc(10,ut,2,2,"mat-chip",13),b.Wb(),b.Wb(),b.Wb()),2&t){const t=b.nc(2);b.Cb(10),b.vc("ngForOf",t.ticket.projectId.assignedUsers)}}function ht(t,e){if(1&t&&(b.Xb(0,"div",4),b.Xb(1,"mat-form-field",5),b.Xb(2,"mat-label"),b.Tc(3,"Project Name"),b.Wb(),b.Sb(4,"input",6),b.Wb(),b.Xb(5,"mat-form-field",5),b.Xb(6,"mat-label"),b.Tc(7,"Project Description"),b.Wb(),b.Xb(8,"textarea",7),b.Tc(9),b.Wb(),b.Wb(),b.Rc(10,ft,11,1,"div",8),b.Sb(11,"br"),b.Xb(12,"mat-form-field",5),b.Xb(13,"mat-label"),b.Tc(14,"Ticket Priority"),b.Wb(),b.Sb(15,"input",6),b.Wb(),b.Xb(16,"mat-form-field",5),b.Xb(17,"mat-label"),b.Tc(18,"Created By"),b.Wb(),b.Sb(19,"input",6),b.Wb(),b.Xb(20,"mat-form-field",5),b.Xb(21,"mat-label"),b.Tc(22,"Email"),b.Wb(),b.Sb(23,"input",6),b.Wb(),b.Xb(24,"mat-form-field",5),b.Xb(25,"mat-label"),b.Tc(26,"updated By"),b.Wb(),b.Sb(27,"input",6),b.Wb(),b.Xb(28,"mat-form-field",5),b.Xb(29,"mat-label"),b.Tc(30,"Created At"),b.Wb(),b.Sb(31,"input",6),b.oc(32,"date"),b.Wb(),b.Xb(33,"mat-form-field",5),b.Xb(34,"mat-label"),b.Tc(35,"Updated At"),b.Wb(),b.Sb(36,"input",6),b.oc(37,"date"),b.Wb(),b.Xb(38,"mat-form-field",5),b.Xb(39,"mat-label"),b.Tc(40,"Status"),b.Wb(),b.Sb(41,"input",6),b.Wb(),b.Wb()),2&t){const t=b.nc();b.Cb(4),b.wc("value",t.ticket.ticket_name),b.Cb(5),b.Uc(t.ticket.ticket_desc),b.Cb(1),b.vc("ngIf",t.ticket.projectId.assignedUsers.length>0),b.Cb(5),b.wc("value",t.ticket.ticket_priority),b.Cb(4),b.yc("value","",t.ticket.userId.first_name," ",t.ticket.userId.last_name,""),b.Cb(4),b.wc("value",t.ticket.userId.email),b.Cb(4),b.yc("value","",t.ticket.updatedBy.first_name," ",t.ticket.userId.last_name,""),b.Cb(4),b.wc("value",b.pc(32,12,t.ticket.createdAt)),b.Cb(5),b.wc("value",b.pc(37,14,t.ticket.updatedAt)),b.Cb(5),b.wc("value",t.ticket.status)}}let Ct=(()=>{class t{constructor(t,e,n,i,a,o){this.ticketsService=t,this.route=e,this.dialogRef=n,this.router=i,this.dialog=a,this.isLoading=!0,this.ticket=[],this.data=[],this.sankBardata={},this.assignedUsers=[],this.isEdit=!0,this.data=o}ngOnInit(){this.isLoading=!0,this.ticketsService.getTicketById(this.data.id).subscribe(t=>{this.isLoading=!1,this.ticket=t.data[0]})}close(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(b.Rb(ct),b.Rb(r.a),b.Rb(s.h),b.Rb(r.b),b.Rb(s.b),b.Rb(s.a))},t.\u0275cmp=b.Lb({type:t,selectors:[["app-ticket-info"]],decls:8,vars:1,consts:[["mat-dialog-title",""],["class","font","mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-dialog-content","",1,"font"],["appearance","outline"],["matInput","","readonly","",3,"value"],["matInput","","type","text","readonly",""],["class","container",4,"ngIf"],[1,"container"],[1,"row"],["md-list-icon",""],["chipList",""],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(b.Xb(0,"div"),b.Xb(1,"h2",0),b.Tc(2,"Project Info"),b.Wb(),b.Wb(),b.Rc(3,ht,42,16,"div",1),b.Xb(4,"div",2),b.Xb(5,"button",3),b.jc("click",(function(){return e.close()})),b.Tc(6,"Close"),b.Wb(),b.Tc(7,"\xa0 "),b.Wb()),2&t&&(b.Cb(3),b.vc("ngIf",!e.isLoading))},directives:[s.i,i.m,s.c,X.b,s.f,_.c,_.g,k.b,M.a,T.b,i.l,T.a],pipes:[i.e],styles:[".form[_ngcontent-%COMP%]{line-height:normal}.mat-card[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}.mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:16px;border-radius:4px;height:auto;min-height:598px}mat-spinner[_ngcontent-%COMP%]{margin:auto}.image-preview[_ngcontent-%COMP%]{height:5rem;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.select_role[_ngcontent-%COMP%]{width:auto}.btn-success[_ngcontent-%COMP%]:hover{color:#0747a6!important;background-color:#fff!important;border-color:#0747a6!important}.btn-success[_ngcontent-%COMP%]{color:#fff!important;background-color:#0747a6!important;border-color:#0747a6!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#fff!important;color:#f89b46}.mat-raised-button[disabled][_ngcontent-%COMP%]:not([class*=mat-elevation-z]){color:#b3b7bd!important;background-color:#fff!important;border-color:red!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important}"]}),t})();const vt=p.a.apiUrl+"/comments";let _t=(()=>{class t{constructor(t,e,n){this.http=t,this.router=e,this.authService=n}getCommentsByTicketId(t,e,n,i){var a=`?pagesize=${t}&page=${e}`;return n&&(a+="&search="+n),this.http.get(vt+"/getcomments/"+i+a)}getUserId(){return this.authService.getUserId()}addComment(t){const e=new FormData;return e.append("file",t.file),e.append("filename",t.filename),e.append("comment",t.comment),e.append("projectId",t.pid),e.append("ticketId",t.tid),e.append("userId",this.authService.getUserId()),e.append("fileType",t.fileType),console.log(t),this.http.post(vt+"/create",e)}getCommentById(t){return this.http.get(vt+"/"+t)}updateComment(t,e,n){return console.log(t),this.http.put(vt+"/"+t._id,{id:t._id,ticket_name:t.ticket_name,ticket_desc:e.ticket_desc,projectId:t.projectId._id,ticket_priority:e.ticket_priority,userId:n})}deleteFile(t,e){return this.http.put(vt+"/deletefile/"+t,{id:t,file_url:e})}deleteComment(t){return this.http.delete(vt+"/"+t)}}return t.\u0275fac=function(e){return new(e||t)(b.fc(u.b),b.fc(r.b),b.fc(f.a))},t.\u0275prov=b.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const kt=p.a.apiUrl+"/tasks";let Wt=(()=>{class t{constructor(t,e,n){this.http=t,this.router=e,this.authService=n}getTaskByTicketId(t,e,n,i,a){var o=`?pagesize=${t}&page=${e}&date=${new Date}`;return n&&(o+="&search="+n),a.userId&&null!=a.userId&&(o+="&userId="+a.userId),a.filter&&(o+="&filter="+a.filter),a.tage&&(o+="&tage="+a.tage),this.http.get(kt+"/gettasks/"+i+o)}getUserId(){return this.authService.getUserId()}addTask(t){const e={task_name:t.task_name,tags:t.tags,task_desc:t.task_desc,start_date:new Date(t.start_date),end_date:new Date(t.end_date),assignedUsers:t.assignedUsers,projectId:t.pid,ticketId:t.tid,userId:this.authService.getUserId()};return this.http.post(kt+"/create",e)}getTaskById(t){return this.http.get(kt+"/"+t)}updateTaskStatus(t){return t.userId=this.authService.getUserId(),this.http.put(kt+"/updatestatus/"+t.id,t)}moveTasktoTicket(t,e){console.log(t,e);let n={id:t._id,ticketId:e.ticketId._id,userId:this.authService.getUserId()};return this.http.put(kt+"/movetask/"+t._id,n)}updateTask(t){return this.http.put(kt+"/"+t._id,t)}deleteTask(t){return this.http.delete(kt+"/"+t)}}return t.\u0275fac=function(e){return new(e||t)(b.fc(u.b),b.fc(r.b),b.fc(f.a))},t.\u0275prov=b.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Xt=n("ihCf"),Mt=n("iadO");const Tt=["assigneeInput"],Pt=["auto"];function Ot(t,e){1&t&&b.Sb(0,"mat-progress-spinner",2)}function yt(t,e){if(1&t&&(b.Xb(0,"mat-option",15,16),b.Tc(2),b.Wb()),2&t){const t=e.$implicit;b.vc("value",t),b.Cb(2),b.Vc(" ",t.ticket_name," ")}}function xt(t,e){if(1&t){const t=b.Yb();b.Xb(0,"div"),b.Xb(1,"div"),b.Xb(2,"mat-icon",3),b.jc("click",(function(){return b.Kc(t),b.nc().viewPage()})),b.Tc(3,"info"),b.Wb(),b.Wb(),b.Sb(4,"br"),b.Sb(5,"br"),b.Xb(6,"div"),b.Xb(7,"div"),b.Xb(8,"h2"),b.Tc(9,"Move Task to Other"),b.Wb(),b.Wb(),b.Xb(10,"form",4,5),b.jc("submit",(function(){b.Kc(t);const e=b.Gc(11);return b.nc().moveTask(e)})),b.Xb(12,"mat-form-field",6),b.Xb(13,"mat-label"),b.Tc(14,"Search Ticks"),b.Wb(),b.Xb(15,"input",7,8),b.jc("ngModelChange",(function(e){return b.Kc(t),b.nc().ticketId=e}))("keyup",(function(){b.Kc(t);const e=b.Gc(16);return b.nc().searchTickets(e.value)})),b.Wb(),b.Xb(17,"mat-autocomplete",9,10),b.Rc(19,yt,3,2,"mat-option",11),b.Wb(),b.Wb(),b.Xb(20,"div",12),b.Xb(21,"a",13),b.jc("click",(function(){return b.Kc(t),b.nc().close()})),b.Tc(22,"close"),b.Wb(),b.Xb(23,"button",14),b.Tc(24,"Move"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()}if(2&t){const t=b.Gc(11),e=b.Gc(18),n=b.nc();b.Cb(15),b.vc("ngModel",n.ticketId)("matAutocomplete",e),b.Cb(2),b.vc("displayWith",n.displayFn1),b.Cb(2),b.vc("ngForOf",n.tickets),b.Cb(4),b.vc("disabled",n.isLoading||t.invalid)}}function It(t,e){1&t&&(b.Xb(0,"h1"),b.Tc(1,"Edit Task"),b.Wb())}function wt(t,e){1&t&&(b.Xb(0,"h1"),b.Tc(1,"New Task"),b.Wb())}function jt(t,e){if(1&t&&(b.Xb(0,"span",45),b.Tc(1),b.Wb()),2&t){const t=b.nc(3);b.Cb(1),b.Wc(" (+",t.selectedTage.length-1," ",2===(null==t.selectedTage?null:t.selectedTage.length)?"other":"others",") ")}}function St(t,e){if(1&t&&(b.Xb(0,"mat-select-trigger"),b.Tc(1),b.Rc(2,jt,2,2,"span",44),b.Wb()),2&t){const t=b.nc(2);b.Cb(1),b.Vc(" ",t.selectedTage?t.selectedTage[0].name:""," "),b.Cb(1),b.vc("ngIf",(null==t.selectedTage?null:t.selectedTage.length)>1)}}function Rt(t,e){if(1&t&&(b.Xb(0,"mat-option",15),b.Tc(1),b.Wb()),2&t){const t=e.$implicit;b.vc("value",t),b.Cb(1),b.Uc(t.name)}}function Ut(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Enter Task Title."),b.Wb())}function Dt(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please Select Start Date."),b.Wb())}function Ft(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please Select Due Date."),b.Wb())}function Lt(t,e){1&t&&(b.Xb(0,"mat-icon",53),b.Tc(1,"cancel"),b.Wb())}function At(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-chip",50),b.jc("removed",(function(){b.Kc(t);const n=e.$implicit;return b.nc(3).remove(n)})),b.Xb(1,"a",51),b.Tc(2),b.Wb(),b.Rc(3,Lt,2,0,"mat-icon",52),b.Wb()}if(2&t){const t=e.$implicit,n=b.nc(3);b.yc("matTooltip","",t.first_name," ",t.last_name,""),b.vc("selectable",n.selectable)("removable",n.removable),b.Cb(2),b.Wc("",t.first_name," ",t.last_name,""),b.Cb(1),b.vc("ngIf",n.removable)}}function zt(t,e){if(1&t&&(b.Xb(0,"div",46),b.Xb(1,"div",18),b.Xb(2,"mat-icon",47),b.Tc(3,"group"),b.Wb(),b.Xb(4,"mat-label"),b.Tc(5,"Assigned Users"),b.Wb(),b.Sb(6,"br"),b.Wb(),b.Xb(7,"div",18),b.Xb(8,"mat-chip-list",null,48),b.Rc(10,At,4,7,"mat-chip",49),b.Wb(),b.Wb(),b.Wb()),2&t){const t=b.nc(2);b.Cb(10),b.vc("ngForOf",t.assignedUsers)}}function Et(t,e){if(1&t&&(b.Xb(0,"mat-option",15,16),b.Tc(2),b.Wb()),2&t){const t=e.$implicit;b.vc("value",t),b.Cb(2),b.Wc(" ",t.first_name," ",t.last_name," ")}}function $t(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Enter Task Note."),b.Wb())}function Bt(t,e){if(1&t){const t=b.Yb();b.Xb(0,"div"),b.Xb(1,"div",17),b.Xb(2,"div",18),b.Xb(3,"div",19),b.Rc(4,It,2,0,"h1",1),b.Rc(5,wt,2,0,"h1",1),b.Wb(),b.Xb(6,"div",19),b.Xb(7,"mat-form-field",20),b.Xb(8,"mat-label"),b.Tc(9,"Tages"),b.Wb(),b.Xb(10,"mat-select",21,22),b.jc("valueChange",(function(e){return b.Kc(t),b.nc().selectedTage=e})),b.Rc(12,St,3,2,"mat-select-trigger",1),b.Rc(13,Rt,2,2,"mat-option",11),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(14,"form",4,23),b.jc("submit",(function(){b.Kc(t);const e=b.Gc(15);return b.nc().onCreate(e)})),b.Xb(16,"div",24),b.Xb(17,"mat-form-field",25),b.Xb(18,"mat-label"),b.Tc(19,"Title"),b.Wb(),b.Xb(20,"textarea",26,27),b.jc("ngModelChange",(function(e){return b.Kc(t),b.nc().task.task_name=e})),b.Tc(22),b.Wb(),b.Rc(23,Ut,2,0,"mat-error",1),b.Wb(),b.Xb(24,"div",18),b.Xb(25,"div",19),b.Xb(26,"mat-form-field",25),b.Xb(27,"mat-label"),b.Tc(28,"Start Date"),b.Wb(),b.Xb(29,"input",28,29),b.jc("ngModelChange",(function(e){return b.Kc(t),b.nc().task.start_date=e})),b.Wb(),b.Sb(31,"mat-datepicker-toggle",30),b.Sb(32,"mat-datepicker",31,32),b.Rc(34,Dt,2,0,"mat-error",1),b.Wb(),b.Wb(),b.Xb(35,"div",19),b.Xb(36,"mat-form-field",25),b.Xb(37,"mat-label"),b.Tc(38,"Due Date"),b.Wb(),b.Xb(39,"input",33,34),b.jc("ngModelChange",(function(e){return b.Kc(t),b.nc().task.end_date=e})),b.Wb(),b.Sb(41,"mat-datepicker-toggle",30),b.Sb(42,"mat-datepicker",31,35),b.Rc(44,Ft,2,0,"mat-error",1),b.Wb(),b.Wb(),b.Wb(),b.Rc(45,zt,11,1,"div",36),b.Sb(46,"br"),b.Xb(47,"mat-form-field",37),b.Xb(48,"mat-label"),b.Tc(49,"Assign Users"),b.Wb(),b.Xb(50,"input",38,39),b.jc("keyup",(function(){b.Kc(t);const e=b.Gc(51);return b.nc().searchUsers(e.value)})),b.Wb(),b.Xb(53,"mat-autocomplete",40,10),b.jc("optionSelected",(function(e){return b.Kc(t),b.nc().onSelection(e)})),b.Rc(55,Et,3,3,"mat-option",11),b.Wb(),b.Wb(),b.Xb(56,"mat-form-field",25),b.Xb(57,"mat-label"),b.Tc(58,"Note"),b.Wb(),b.Xb(59,"textarea",41,42),b.jc("ngModelChange",(function(e){return b.Kc(t),b.nc().task.task_desc=e})),b.Tc(61),b.Wb(),b.Rc(62,$t,2,0,"mat-error",1),b.Wb(),b.Wb(),b.Xb(63,"div",12),b.Xb(64,"button",43),b.jc("click",(function(){return b.Kc(t),b.nc().close()})),b.Tc(65,"Close"),b.Wb(),b.Tc(66,"\xa0 "),b.Xb(67,"button",14),b.Tc(68,"Save"),b.Wb(),b.Wb(),b.Wb(),b.Wb()}if(2&t){const t=b.Gc(15),e=b.Gc(21),n=b.Gc(30),i=b.Gc(33),a=b.Gc(40),o=b.Gc(43),c=b.Gc(54),r=b.Gc(60),s=b.nc();b.Cb(4),b.vc("ngIf","update"==s.data.mode),b.Cb(1),b.vc("ngIf","add"==s.data.mode),b.Cb(5),b.vc("value",s.selectedTage)("compareWith",s.comparer),b.Cb(2),b.vc("ngIf",s.selectedTage&&s.selectedTage.length>0),b.Cb(1),b.vc("ngForOf",s.tags),b.Cb(7),b.vc("ngModel",s.task.task_name),b.Cb(2),b.Uc(s.task.task_name),b.Cb(1),b.vc("ngIf",e.hasError("required")),b.Cb(6),b.vc("min",s.minDate)("max",s.maxDate)("matDatepicker",i)("ngModel",s.task.start_date),b.Cb(2),b.vc("for",i),b.Cb(3),b.vc("ngIf",n.hasError("required")),b.Cb(5),b.vc("min",s.minDate)("max",s.maxDate)("matDatepicker",o)("ngModel",s.task.end_date),b.Cb(2),b.vc("for",o),b.Cb(3),b.vc("ngIf",a.hasError("required")),b.Cb(1),b.vc("ngIf",s.assignedUsers.length>0),b.Cb(5),b.vc("matAutocomplete",c)("formControl",s.fruitCtrl),b.Cb(3),b.vc("displayWith",s.displayFn),b.Cb(2),b.vc("ngForOf",s.searchUser),b.Cb(4),b.vc("ngModel",s.task.task_desc),b.Cb(2),b.Uc(s.task.task_desc),b.Cb(1),b.vc("ngIf",r.hasError("required")),b.Cb(5),b.vc("disabled",s.isLoading||t.invalid)}}let qt=(()=>{class t{constructor(t,e,n,i,a,o,r,s){this.ticketsService=t,this.commentService=e,this.projectsService=n,this.taskService=i,this._snackBar=a,this.dialogRef=o,this.dialog=r,this.data=[],this.toppings=new c.d,this.isLoading=!0,this.tickets=[],this.sankBardata={},this.fruitCtrl=new c.d,this.searchUser=[],this.assignedUsers=[],this.task={},this.tags=[{color:"#49b560",name:"Frontend"},{color:"#f44336",name:"Backend"},{color:"#ffb300",name:"API"},{color:"#0729ca",name:"Issue"},{color:"#d700ff",name:"Mobile"},{color:"#009cb5",name:"Future"},{color:"#000",name:"Other"}],this.taskList=["To Do","Inprogress","Done","Closed"],this.horizontalPos="right",this.verticalPos="top",this.selectable=!0,this.page=!0,this.removable=!0,this.selectedTage=[],this.data=s,this.task={_id:"",task_name:"",task_desc:"",assignedUsers:[],start_date:"",end_date:""},this.userId=this.commentService.getUserId(),this.viewpage="comments",console.log(this.data);const l=(new Date).getFullYear();this.minDate=new Date,this.maxDate=new Date(l+0,11,31),console.log(this.maxDate,this.minDate)}ngOnInit(){this.data.task._id&&"update"==this.data.mode&&(this.task=this.data.task,this.selectedTage=this.data.task.tags,this.assignedUsers=this.data.task.assignedUsers),this.isLoading=!1}comparer(t,e){return t&&e?t.name===e.name:e==e}searchTickets(t){this.isLoading=!0,t&&this.ticketsService.getTicketsByProjectId(0,1,t,this.data.task.projectId._id).subscribe(t=>{this.tickets=t.data,this.isLoading=!1})}searchUsers(t){if(t){var e=this.data.task.projectId.assignedUsers.filter(e=>e.first_name.toLowerCase().includes(t)||e.last_name.toLowerCase().includes(t));console.log(e),this.searchUser=e}}displayFn(t){return t?t.first_name+" "+t.last_name:""}onSelection(t){const e=t.option.value;let n=this.assignedUsers.findIndex(t=>t._id===e._id);console.log(n,e),-1==n?(this.assignedUsers.push(t.option.value),this.assigneeInput.nativeElement.value="",this.fruitCtrl.setValue(null)):(this.sankBardata.message="User Allready Exist in this Task.",this.openSnakBar(),this.fruitCtrl.setValue(null))}displayFn1(t){return t?t.ticket_name:""}selected(t){this.assignedUsers.push(t.option.viewValue),this.assignedUsers.nativeElement.value="",this.assignedUsers.setValue(null)}remove(t){const e=this.assignedUsers.indexOf(t);e>=0&&this.assignedUsers.splice(e,1)}openSnakBar(){let t=new d.b;t.verticalPosition=this.verticalPos,t.horizontalPosition=this.horizontalPos,t.duration=8e3,this._snackBar.open(this.sankBardata.message,"Ok",t)}onCreate(t){if(!t.invalid)if(this.isLoading=!0,"update"==this.data.mode)this.data.task.assignedUsers=this.assignedUsers,this.data.task.tags=this.selectedTage,this.taskService.updateTask(this.data.task).subscribe(t=>{this.isLoading=!1,this.sankBardata.message="Task Updated.",this.openSnakBar(),this.dialogRef.close()},t=>{this.isLoading=!1});else{let e={};e.task_name=t.value.task_name,e.task_desc=t.value.task_desc,e.tags=this.selectedTage,e.start_date=new Date(t.value.start_date),e.end_date=new Date(t.value.end_date),e.assignedUsers=this.assignedUsers,e.pid=this.data.task.projectId._id,e.tid=this.data.task._id,this.taskService.addTask(e).subscribe(t=>{this.isLoading=!1,this.sankBardata.message="Task Created.",this.openSnakBar(),this.dialogRef.close()},t=>{this.isLoading=!1})}}moveTask(t){t.invalid||(this.isLoading=!0,this.taskService.moveTasktoTicket(this.data.task,t.value).subscribe(t=>{this.sankBardata.message="Task Updated.",this.openSnakBar(),this.dialogRef.close()},t=>{this.isLoading=!1}))}viewPage(){this.page=!this.page}close(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(b.Rb(ct),b.Rb(_t),b.Rb(v),b.Rb(Wt),b.Rb(d.a),b.Rb(s.h),b.Rb(s.b),b.Rb(s.a))},t.\u0275cmp=b.Lb({type:t,selectors:[["app-common-popup"]],viewQuery:function(t,e){var n;1&t&&(b.Zc(Tt,!0),b.Zc(Pt,!0)),2&t&&(b.Fc(n=b.kc())&&(e.assigneeInput=n.first),b.Fc(n=b.kc())&&(e.matAutocomplete=n.first))},decls:3,vars:3,consts:[["class","example-margin","mode","indeterminate","diameter","20","value","20",4,"ngIf"],[4,"ngIf"],["mode","indeterminate","diameter","20","value","20",1,"example-margin"],["matTooltip","Move Task",2,"float","right",3,"click"],[3,"submit"],["moveTaskForm","ngForm"],["appearance","outline",1,"status_cus",2,"height","1px","top","-20px"],["type","text","name","ticketId","matInput","","placeholder","Serach Tickets...","required","",3,"ngModel","matAutocomplete","ngModelChange","keyup"],["assigneeInput",""],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-card-actions","","align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"],["datae",""],["mat-dialog-title",""],[1,"row"],[1,"col-md-6"],["appearance","outline",2,"font-size","11px","width","49%","float","right"],["name","tags","placeholder","Choose tags","multiple","",3,"value","compareWith","valueChange"],["toppings",""],["createTaskForm","ngForm"],["mat-dialog-content","",1,"font"],["appearance","outline"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5","name","task_name","type","text","placeholder","Task Title","required","",3,"ngModel","ngModelChange"],["nameInput","ngModel"],["matInput","","readonly","","name","start_date","placeholder","Select Start Date","required","",3,"min","max","matDatepicker","ngModel","ngModelChange"],["sdataInput","ngModel"],["matSuffix","",3,"for"],["disabled","false"],["picker",""],["matInput","","readonly","","name","end_date","placeholder","Select Due Date","required","",3,"min","max","matDatepicker","ngModel","ngModelChange"],["edataInput","ngModel"],["picker1",""],["class","container",4,"ngIf"],["appearance","outline",2,"width","100%"],["type","text","matInput","","placeholder","New User...",3,"matAutocomplete","formControl","keyup"],["assigneeInput","","assigneeInput",""],[3,"displayWith","optionSelected"],["matInput","","name","task_desc","type","text","placeholder","Description","required","",3,"ngModel","ngModelChange"],["descInput","ngModel"],["mat-raised-button","","color","primary","matDialogClose","",3,"click"],["class","example-additional-selection",4,"ngIf"],[1,"example-additional-selection"],[1,"container"],["md-list-icon",""],["chipList",""],[3,"matTooltip","selectable","removable","removed",4,"ngFor","ngForOf"],[3,"matTooltip","selectable","removable","removed"],[1,"formate_chip"],["matChipRemove","",4,"ngIf"],["matChipRemove",""]],template:function(t,e){1&t&&(b.Rc(0,Ot,1,0,"mat-progress-spinner",0),b.Rc(1,xt,25,5,"div",1),b.Rc(2,Bt,69,30,"div",1)),2&t&&(b.vc("ngIf",e.isLoading),b.Cb(1),b.vc("ngIf","info"==e.data.mode),b.Cb(1),b.vc("ngIf","add"==e.data.mode||"update"==e.data.mode))},directives:[i.m,V.a,M.a,G.a,c.x,c.n,c.o,_.c,_.g,k.b,c.b,W.c,c.u,c.m,c.p,W.a,i.l,X.a,X.b,P.o,s.i,rt.a,s.f,Xt.b,Mt.b,Mt.d,_.h,Mt.a,c.e,s.d,rt.c,_.b,T.b,T.a,T.c],styles:[".form[_ngcontent-%COMP%]{line-height:normal}mat-form-field[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}mat-spinner[_ngcontent-%COMP%]{margin:auto}.image-preview[_ngcontent-%COMP%]{height:5rem;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.select_role[_ngcontent-%COMP%]{width:auto}.btn-success[_ngcontent-%COMP%]:hover{color:#0747a6!important;background-color:#fff!important;border-color:#0747a6!important}.btn-success[_ngcontent-%COMP%]{color:#fff!important;background-color:#0747a6!important;border-color:#0747a6!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#fff!important;color:#f89b46}input[type=file][_ngcontent-%COMP%]{visibility:hidden}.mat-raised-button[disabled][_ngcontent-%COMP%]:not([class*=mat-elevation-z]){color:#b3b7bd!important;background-color:#fff!important;border-color:red!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important}"]}),t})();var Kt=n("MutI"),Gt=n("STbY");const Vt=["assigneeInput"],Nt=["auto"];function Yt(t,e){1&t&&b.Sb(0,"mat-progress-spinner",2)}function Ht(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-chip",15),b.jc("click",(function(){b.Kc(t);const n=e.$implicit;return b.nc(2).filter(n)})),b.Xb(1,"a",16),b.Tc(2),b.Wb(),b.Wb()}if(2&t){const t=e.$implicit;b.yc("matTooltip","",t.first_name," ",t.last_name,""),b.Cb(2),b.Wc("",t.first_name," ",t.last_name,"")}}function Zt(t,e){1&t&&(b.Xb(0,"mat-icon",19),b.Tc(1,"cancel"),b.Wb())}function Qt(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-chip",17),b.jc("removed",(function(){return b.Kc(t),b.nc(2).removeFilter()})),b.Tc(1,"clear "),b.Rc(2,Zt,2,0,"mat-icon",18),b.Wb()}if(2&t){const t=b.nc(2);b.vc("selectable",t.selectable)("removable",t.removable),b.Cb(2),b.vc("ngIf",t.removable)}}function Jt(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Write Your Comment..."),b.Wb())}function te(t,e){if(1&t&&(b.Xb(0,"div",44),b.Xb(1,"a"),b.Tc(2),b.Wb(),b.Wb()),2&t){const t=b.nc(3);b.wc("matTooltip",t.selectedFileName),b.Cb(2),b.Uc(t.selectedFileName)}}function ee(t,e){1&t&&b.Sb(0,"mat-progress-spinner",45)}function ne(t,e){if(1&t&&(b.Xb(0,"div",48),b.Xb(1,"div",49),b.Xb(2,"span",50),b.Tc(3),b.Wb(),b.Xb(4,"p"),b.Tc(5),b.Wb(),b.Xb(6,"p"),b.Xb(7,"small"),b.Tc(8),b.oc(9,"date"),b.oc(10,"date"),b.Wb(),b.Wb(),b.Wb(),b.Wb()),2&t){const t=b.nc().$implicit,e=b.nc(3);b.Cb(2),b.yc("matTooltip","",t.userId.first_name," ",t.userId.last_name,""),b.Cb(1),b.Uc(e.formateName(t.userId.first_name,t.userId.last_name)),b.Cb(2),b.Uc(t.comment),b.Cb(3),b.Wc("",b.qc(9,6,t.createdAt,"mediumDate")," at ",b.qc(10,9,t.createdAt,"shortTime"),"")}}function ie(t,e){if(1&t&&(b.Xb(0,"a",55),b.Xb(1,"mat-icon",56),b.Tc(2,"attachment"),b.Wb(),b.Wb()),2&t){const t=b.nc(2).$implicit,e=b.nc(3);b.wc("matTooltip",t.file_url),b.yc("href","",e.host_ip,"/uploads/",t.file_url,"",b.Lc)}}function ae(t,e){if(1&t&&(b.Xb(0,"div",51),b.Xb(1,"div",52),b.Xb(2,"span"),b.Xb(3,"p",53),b.Tc(4),b.Wb(),b.Wb(),b.Xb(5,"p"),b.Tc(6),b.Wb(),b.Xb(7,"p"),b.Rc(8,ie,3,3,"a",54),b.Xb(9,"small"),b.Tc(10),b.oc(11,"date"),b.oc(12,"date"),b.Wb(),b.Wb(),b.Wb(),b.Wb()),2&t){const t=b.nc().$implicit,e=b.nc(3);b.Cb(3),b.yc("matTooltip","",t.first_name," ",t.last_name,""),b.Cb(1),b.Uc(e.formateName(t.userId.first_name,t.userId.last_name)),b.Cb(2),b.Uc(t.comment),b.Cb(2),b.vc("ngIf",t.file_url),b.Cb(2),b.Wc("",b.qc(11,7,t.createdAt,"mediumDate")," at ",b.qc(12,10,t.createdAt,"shortTime"),"")}}function oe(t,e){if(1&t&&(b.Xb(0,"div"),b.Rc(1,ne,11,12,"div",46),b.Rc(2,ae,13,13,"div",47),b.Wb()),2&t){const t=e.$implicit,n=b.nc(3);b.Cb(1),b.vc("ngIf",n.userId!=t.userId._id),b.Cb(1),b.vc("ngIf",n.userId==t.userId._id)}}function ce(t,e){1&t&&(b.Xb(0,"div"),b.Tc(1,"No Comments Found..!"),b.Wb())}function re(t,e){if(1&t){const t=b.Yb();b.Xb(0,"div"),b.Xb(1,"div",20),b.Xb(2,"div",21),b.Xb(3,"mat-icon"),b.Tc(4,"notes"),b.Wb(),b.Xb(5,"mat-label",22),b.Tc(6,"Description"),b.Wb(),b.Wb(),b.Xb(7,"div",23),b.Xb(8,"div",24),b.Xb(9,"pre"),b.Tc(10),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(11,"div",25),b.Xb(12,"form",26,27),b.jc("submit",(function(){b.Kc(t);const e=b.Gc(13);return b.nc(2).onComment(e)})),b.Xb(14,"div",20),b.Xb(15,"div",28),b.Xb(16,"mat-form-field",29),b.Xb(17,"mat-label"),b.Tc(18,"Your Comment"),b.Wb(),b.Xb(19,"textarea",30,31),b.jc("ngModelChange",(function(e){return b.Kc(t),b.nc(2).commentDataForm.comment=e})),b.Wb(),b.Xb(21,"mat-icon",32),b.Tc(22,"insert_comment"),b.Wb(),b.Rc(23,Jt,2,0,"mat-error",1),b.Wb(),b.Wb(),b.Xb(24,"div",33),b.Xb(25,"div"),b.Xb(26,"input",34,35),b.jc("change",(function(e){return b.Kc(t),b.nc(2).selectFile(e)})),b.Wb(),b.Xb(28,"a",36),b.jc("click",(function(){return b.Kc(t),b.Gc(27).click()})),b.Xb(29,"mat-icon",37),b.Tc(30,"attachment"),b.Wb(),b.Wb(),b.Xb(31,"button",38),b.Xb(32,"mat-icon",39),b.Tc(33,"send"),b.Wb(),b.Wb(),b.Wb(),b.Sb(34,"br"),b.Rc(35,te,3,2,"div",40),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(36,"div"),b.Xb(37,"div",41),b.Rc(38,ee,1,0,"mat-progress-spinner",42),b.Wb(),b.Rc(39,oe,3,2,"div",43),b.Rc(40,ce,2,0,"div",1),b.Wb(),b.Wb()}if(2&t){const t=b.Gc(13),e=b.Gc(20),n=b.nc(2);b.Cb(10),b.Vc("",n.ticket.ticket_desc," "),b.Cb(9),b.vc("ngModel",n.commentDataForm.comment),b.Cb(4),b.vc("ngIf",e.hasError("required")),b.Cb(8),b.vc("disabled",n.isLoadingComments||t.invalid),b.Cb(4),b.vc("ngIf",n.selectedFileName),b.Cb(3),b.vc("ngIf",n.isLoadingComments),b.Cb(1),b.vc("ngForOf",n.comments),b.Cb(1),b.vc("ngIf",!n.isLoadingComments&&n.comments.length<=0)}}function se(t,e){if(1&t&&(b.Xb(0,"p",69),b.Tc(1),b.Wb()),2&t){const t=b.nc(2).$implicit;b.Cb(1),b.Vc(" ",t.fileType," ")}}function le(t,e){if(1&t){const t=b.Yb();b.Xb(0,"div"),b.Xb(1,"div",58),b.Xb(2,"a",59),b.Rc(3,se,2,1,"p",60),b.Wb(),b.Xb(4,"p",61),b.Xb(5,"span",62),b.Tc(6),b.Wb(),b.Xb(7,"a",63),b.Sb(8,"span",64),b.Wb(),b.Xb(9,"span",65),b.Xb(10,"span"),b.Tc(11,"Added on"),b.Xb(12,"span",66),b.Tc(13),b.oc(14,"date"),b.oc(15,"date"),b.Wb(),b.Wb(),b.Xb(16,"span"),b.Xb(17,"a",67),b.Xb(18,"span",68),b.jc("click",(function(){b.Kc(t);const e=b.nc().$implicit;return b.nc(3).deleteAttachment(e._id,e.file_url)})),b.Tc(19,"Delete"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()}if(2&t){const t=b.nc().$implicit,e=b.nc(3);b.Cb(2),b.Pc("background-image: url(",e.host_ip,"/uploads/",t.file_url,");background-color: #5a5857;"),b.yc("href","",e.host_ip,"/uploads/",t.file_url,"",b.Lc),b.wc("title",t.file_url),b.Cb(1),b.vc("ngIf","jpg"!=t.fileType&&"gif"!=t.fileType&&"png"!=t.fileType&&"jpeg"!=t.fileType),b.Cb(3),b.Uc(t.file_url),b.Cb(7),b.Wc(" ",b.qc(14,11,t.createdAt,"mediumDate")," at ",b.qc(15,14,t.createdAt,"shortTime"),"")}}function de(t,e){if(1&t&&(b.Xb(0,"div",25),b.Rc(1,le,20,17,"div",1),b.Wb()),2&t){const t=e.$implicit;b.Cb(1),b.vc("ngIf",t.fileType)}}function be(t,e){if(1&t&&(b.Xb(0,"div"),b.Sb(1,"br"),b.Rc(2,de,2,1,"div",57),b.Wb()),2&t){const t=b.nc(2);b.Cb(2),b.vc("ngForOf",t.comments)}}const me=function(t){return{active_tag:t}},ge=function(t){return{color:t}};function pe(t,e){if(1&t){const t=b.Yb();b.Xb(0,"span",90),b.jc("click",(function(){b.Kc(t);const n=e.$implicit;return b.nc(3).changeTage(n)})),b.Tc(1),b.Wb()}if(2&t){const t=e.$implicit,n=b.nc(3);b.vc("ngClass",b.Ac(3,me,n.selectionFilter===t.name))("ngStyle",b.Ac(5,ge,t.color)),b.Cb(1),b.Uc(t.name)}}function ue(t,e){1&t&&b.Sb(0,"mat-progress-spinner",45)}function fe(t,e){1&t&&(b.Xb(0,"div",91),b.Tc(1,"No Tasks Found..!"),b.Wb())}function he(t,e){if(1&t&&(b.Xb(0,"span",108),b.Tc(1),b.Wb()),2&t){const t=e.$implicit,n=b.nc(4);b.yc("matTooltip","",t.first_name," ",t.last_name,""),b.Cb(1),b.Uc(n.formateName(t.first_name,t.last_name))}}function Ce(t,e){if(1&t&&(b.Xb(0,"a",111),b.Tc(1),b.Wb()),2&t){const t=e.$implicit;b.vc("ngStyle",b.Ac(2,ge,t.color)),b.Cb(1),b.Uc(t.name)}}function ve(t,e){if(1&t&&(b.Xb(0,"div",109),b.Rc(1,Ce,2,4,"a",110),b.Wb()),2&t){const t=b.nc().$implicit;b.Cb(1),b.vc("ngForOf",t.tags)}}function _e(t,e){if(1&t){const t=b.Yb();b.Xb(0,"button",107),b.jc("click",(function(){b.Kc(t);const e=b.nc().$implicit;return b.nc(3).onChangeStatus(e,"status","Pending")})),b.Xb(1,"mat-icon"),b.Tc(2,"check_box"),b.Wb(),b.Xb(3,"span"),b.Tc(4,"Mark as undone"),b.Wb(),b.Wb()}}function ke(t,e){if(1&t){const t=b.Yb();b.Xb(0,"button",107),b.jc("click",(function(){b.Kc(t);const e=b.nc().$implicit;return b.nc(3).onChangeStatus(e,"status","Done")})),b.Xb(1,"mat-icon"),b.Tc(2,"check_box_outline_blank"),b.Wb(),b.Xb(3,"span"),b.Tc(4,"Mark as Done"),b.Wb(),b.Wb()}}function We(t,e){1&t&&(b.Xb(0,"span"),b.Tc(1,"Remove Starred"),b.Wb())}function Xe(t,e){1&t&&(b.Xb(0,"span"),b.Tc(1,"Make as Starred"),b.Wb())}function Me(t,e){1&t&&(b.Xb(0,"span"),b.Tc(1,"Remove Priority"),b.Wb())}function Te(t,e){1&t&&(b.Xb(0,"span"),b.Tc(1,"Mark as Priority"),b.Wb())}function Pe(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-card",92),b.Xb(1,"div",93),b.Xb(2,"div",94),b.Xb(3,"p",95),b.Tc(4),b.Wb(),b.Xb(5,"div",96),b.Tc(6),b.Wb(),b.Xb(7,"div",97),b.Rc(8,he,2,3,"span",98),b.Xb(9,"span",99),b.jc("click",(function(){b.Kc(t);const n=e.$implicit;return b.nc(3).openDialog(n,"update")})),b.Xb(10,"a",100),b.Tc(11,"+"),b.Wb(),b.Wb(),b.Rc(12,ve,2,1,"div",101),b.Wb(),b.Wb(),b.Xb(13,"div",102),b.Xb(14,"mat-icon",77),b.jc("click",(function(){b.Kc(t);const n=e.$implicit;return b.nc(3).onChangeStatus(n,"priority",n.status)})),b.Tc(15,"error_outline"),b.Wb(),b.Xb(16,"mat-icon",74),b.jc("click",(function(){b.Kc(t);const n=e.$implicit;return b.nc(3).onChangeStatus(n,"starred",n.status)})),b.Tc(17,"star_border"),b.Wb(),b.Xb(18,"button",103),b.Xb(19,"mat-icon"),b.Tc(20,"more_vert"),b.Wb(),b.Wb(),b.Xb(21,"mat-menu",104,105),b.Rc(23,_e,5,0,"button",106),b.Rc(24,ke,5,0,"button",106),b.Xb(25,"button",107),b.jc("click",(function(){b.Kc(t);const n=e.$implicit;return b.nc(3).onChangeStatus(n,"starred",n.status)})),b.Xb(26,"mat-icon"),b.Tc(27,"star_border"),b.Wb(),b.Rc(28,We,2,0,"span",1),b.Rc(29,Xe,2,0,"span",1),b.Wb(),b.Xb(30,"button",107),b.jc("click",(function(){b.Kc(t);const n=e.$implicit;return b.nc(3).onChangeStatus(n,"priority",n.status)})),b.Xb(31,"mat-icon"),b.Tc(32,"error_outline"),b.Wb(),b.Rc(33,Me,2,0,"span",1),b.Rc(34,Te,2,0,"span",1),b.Wb(),b.Xb(35,"button",107),b.jc("click",(function(){b.Kc(t);const n=e.$implicit;return b.nc(3).openDialog(n,"info")})),b.Xb(36,"mat-icon"),b.Tc(37,"assignment_late"),b.Wb(),b.Xb(38,"span"),b.Tc(39,"Move to Other"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()}if(2&t){const t=e.$implicit,n=b.Gc(22);b.Cb(3),b.vc("ngClass","Done"==t.status?"task_done":" "),b.Cb(1),b.Vc(" ",t.task_name,""),b.Cb(1),b.vc("ngClass","Done"==t.status?"task_done":" "),b.Cb(1),b.Uc(t.task_desc),b.Cb(2),b.vc("ngForOf",t.assignedUsers),b.Cb(4),b.vc("ngIf",t.tags),b.Cb(2),b.vc("ngClass",t.task_priority?"priority_true":"priority_false"),b.Cb(2),b.vc("ngClass",t.starred?"starred_true":"starred_false"),b.Cb(2),b.vc("matMenuTriggerFor",n),b.Cb(5),b.vc("ngIf","Done"==t.status),b.Cb(1),b.vc("ngIf","Done"!=t.status),b.Cb(4),b.vc("ngIf",t.starred),b.Cb(1),b.vc("ngIf",!t.starred),b.Cb(4),b.vc("ngIf",t.task_priority),b.Cb(1),b.vc("ngIf",!t.task_priority)}}const Oe=function(t){return{active_filter:t}};function ye(t,e){if(1&t){const t=b.Yb();b.Xb(0,"div",null,70),b.Xb(2,"div",25),b.Xb(3,"div",20),b.Xb(4,"div",71),b.Xb(5,"div",72),b.Xb(6,"div",73),b.Tc(7,"FILTERS"),b.Wb(),b.Xb(8,"mat-nav-list"),b.Xb(9,"mat-list-item",74),b.jc("click",(function(){return b.Kc(t),b.nc(2).changeFilter("all")})),b.Xb(10,"mat-icon"),b.Tc(11,"list"),b.Wb(),b.Sb(12,"div",75),b.Xb(13,"div",76),b.Xb(14,"span"),b.Tc(15,"All"),b.Wb(),b.Wb(),b.Wb(),b.Xb(16,"mat-list-item",74),b.jc("click",(function(){return b.Kc(t),b.nc(2).changeFilter("Starred")})),b.Xb(17,"mat-icon"),b.Tc(18,"star_border"),b.Wb(),b.Sb(19,"div",75),b.Xb(20,"div",76),b.Xb(21,"span"),b.Tc(22,"Starred"),b.Wb(),b.Wb(),b.Wb(),b.Xb(23,"mat-list-item",77),b.jc("click",(function(){return b.Kc(t),b.nc(2).changeFilter("Priority")})),b.Xb(24,"mat-icon"),b.Tc(25,"error"),b.Wb(),b.Sb(26,"div",75),b.Xb(27,"div",76),b.Xb(28,"span"),b.Tc(29,"Priority"),b.Wb(),b.Wb(),b.Wb(),b.Xb(30,"mat-list-item",78),b.jc("click",(function(){return b.Kc(t),b.nc(2).changeFilter("Sheduled")})),b.Xb(31,"mat-icon"),b.Tc(32,"schedule"),b.Wb(),b.Sb(33,"div",75),b.Xb(34,"div",76),b.Xb(35,"span"),b.Tc(36,"Sheduled"),b.Wb(),b.Wb(),b.Wb(),b.Xb(37,"mat-list-item",79),b.jc("click",(function(){return b.Kc(t),b.nc(2).changeFilter("Today")})),b.Xb(38,"mat-icon"),b.Tc(39,"today"),b.Wb(),b.Sb(40,"div",75),b.Xb(41,"div",76),b.Xb(42,"span"),b.Tc(43,"Today"),b.Wb(),b.Wb(),b.Wb(),b.Xb(44,"mat-list-item",80),b.jc("click",(function(){return b.Kc(t),b.nc(2).changeFilter("Done")})),b.Xb(45,"mat-icon"),b.Tc(46,"done"),b.Wb(),b.Sb(47,"div",75),b.Xb(48,"div",76),b.Xb(49,"span"),b.Tc(50,"Done"),b.Wb(),b.Wb(),b.Wb(),b.Xb(51,"mat-list-item",81),b.jc("click",(function(){return b.Kc(t),b.nc(2).changeFilter("Deleted")})),b.Xb(52,"mat-icon"),b.Tc(53,"delete"),b.Wb(),b.Sb(54,"div",75),b.Xb(55,"div",76),b.Xb(56,"span"),b.Tc(57,"Deleted"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(58,"div",82),b.Xb(59,"div",83),b.Xb(60,"a"),b.Rc(61,pe,2,7,"span",84),b.Wb(),b.Xb(62,"button",85),b.jc("click",(function(){b.Kc(t);const e=b.nc(2);return e.openDialog(e.ticket,"add")})),b.Xb(63,"mat-icon"),b.Tc(64,"add"),b.Wb(),b.Wb(),b.Wb(),b.Xb(65,"div",41),b.Rc(66,ue,1,0,"mat-progress-spinner",42),b.Wb(),b.Xb(67,"div",86),b.Rc(68,fe,2,0,"div",87),b.Sb(69,"span",88),b.Rc(70,Pe,40,15,"mat-card",89),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb()}if(2&t){const t=b.nc(2);b.Cb(9),b.vc("ngClass",b.Ac(11,Oe,"all"===t.selectionFilter)),b.Cb(7),b.vc("ngClass",b.Ac(13,Oe,"Starred"===t.selectionFilter)),b.Cb(7),b.vc("ngClass",b.Ac(15,Oe,"Priority"===t.selectionFilter)),b.Cb(7),b.vc("ngClass",b.Ac(17,Oe,"Sheduled"===t.selectionFilter)),b.Cb(7),b.vc("ngClass",b.Ac(19,Oe,"Today"===t.selectionFilter)),b.Cb(7),b.vc("ngClass",b.Ac(21,Oe,"Done"===t.selectionFilter)),b.Cb(7),b.vc("ngClass",b.Ac(23,Oe,"Deleted"===t.selectionFilter)),b.Cb(10),b.vc("ngForOf",t.tags),b.Cb(5),b.vc("ngIf",t.isLoadingTask),b.Cb(2),b.vc("ngIf",t.tasks.length<=0&&!t.isLoadingTask),b.Cb(2),b.vc("ngForOf",t.tasks)}}const xe=function(t){return{tab_btn_active:t}};function Ie(t,e){if(1&t){const t=b.Yb();b.Xb(0,"div"),b.Xb(1,"div",3),b.Xb(2,"div"),b.Xb(3,"button",4),b.jc("click",(function(){return b.Kc(t),b.nc().close()})),b.Xb(4,"mat-icon"),b.Tc(5,"close"),b.Wb(),b.Wb(),b.Wb(),b.Xb(6,"div",5),b.Xb(7,"mat-icon"),b.Tc(8,"subtitles"),b.Wb(),b.Tc(9),b.Wb(),b.Xb(10,"div",6),b.Xb(11,"div",7),b.Xb(12,"button",8),b.jc("click",(function(){return b.Kc(t),b.nc().viewPage("comments")})),b.Xb(13,"mat-icon",9),b.Tc(14,"chat"),b.Wb(),b.Tc(15," Comments"),b.Wb(),b.Wb(),b.Xb(16,"div",7),b.Xb(17,"button",8),b.jc("click",(function(){return b.Kc(t),b.nc().viewPage("attachments")})),b.Xb(18,"mat-icon",9),b.Tc(19,"attachment"),b.Wb(),b.Tc(20," Attachments"),b.Wb(),b.Wb(),b.Xb(21,"div",7),b.Xb(22,"button",8),b.jc("click",(function(){return b.Kc(t),b.nc().viewPage("tasks")})),b.Xb(23,"mat-icon",9),b.Tc(24,"list"),b.Wb(),b.Tc(25," Tasks"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(26,"div",10),b.Xb(27,"div"),b.Xb(28,"mat-chip-list",null,11),b.Xb(30,"button",12),b.Xb(31,"mat-icon",9),b.Tc(32,"group"),b.Wb(),b.Wb(),b.Rc(33,Ht,3,4,"mat-chip",13),b.Rc(34,Qt,3,3,"mat-chip",14),b.Wb(),b.Wb(),b.Rc(35,re,41,8,"div",1),b.Rc(36,be,3,1,"div",1),b.Rc(37,ye,71,25,"div",1),b.Wb(),b.Wb()}if(2&t){const t=b.nc();b.Cb(9),b.Vc(" ",t.ticket.ticket_name," "),b.Cb(3),b.vc("ngClass",b.Ac(9,xe,"comments"===t.viewpage)),b.Cb(5),b.vc("ngClass",b.Ac(11,xe,"attachments"===t.viewpage)),b.Cb(5),b.vc("ngClass",b.Ac(13,xe,"tasks"===t.viewpage)),b.Cb(11),b.vc("ngForOf",t.ticket.projectId.assignedUsers),b.Cb(1),b.vc("ngIf",t.clearFilter&&"tasks"==t.viewpage),b.Cb(1),b.vc("ngIf","comments"===t.viewpage),b.Cb(1),b.vc("ngIf","attachments"===t.viewpage),b.Cb(1),b.vc("ngIf","tasks"===t.viewpage)}}let we=(()=>{class t{constructor(t,e,n,i,a,o,r,s){this.ticketsService=t,this.commentService=e,this.projectsService=n,this.taskService=i,this._snackBar=a,this.dialogRef=o,this.dialog=r,this.ticket=[],this.comments=[],this.tasks=[],this.data=[],this.viewpage="tasks",this.isLoading=!0,this.host_ip=p.a.ip,this.visible=!1,this.isEdit=!1,this.selectable=!0,this.removable=!0,this.selectionFilter="all",this.editable=!0,this.selectedFiles=[],this.attachment=[],this.editSingleTaskForm={task_name:"",assignedUsers:[],id:""},this.commentDataForm={comment:"",assignedUsers:[],id:""},this.separatorKeysCodes=[l.g,l.c],this.fruitCtrl=new c.d,this.isLoadingComments=!0,this.isLoadingTask=!0,this.perPage=50,this.currentPage=1,this.Count=0,this.searchUser=[],this.assignedUsers=[],this.clearFilter=!1,this.sizeOptions=[10,20,50],this.sankBardata={},this.horizontalPos="right",this.verticalPos="top",this.taskList=["To Do","Inprogress","Done","Closed"],this.tags=[{color:"#49b560",name:"Frontend"},{color:"#f44336",name:"Backend"},{color:"#ffb300",name:"API"},{color:"#0729ca",name:"Issue"},{color:"#d700ff",name:"Mobile"},{color:"#009cb5",name:"Future"},{color:"#000",name:"Other"}],this.data=s,this.userId=this.commentService.getUserId(),this.viewpage="comments"}ngOnInit(){this.isLoading=!0,this.ticketsService.getTicketById(this.data.tid).subscribe(t=>{this.ticket=t.data[0],this.isLoading=!1,this.getComments()})}getComments(){this.commentService.getCommentsByTicketId(this.perPage,this.currentPage,this.search,this.data.tid).subscribe(t=>{this.comments=t.data,this.isLoadingComments=!1})}selectFile(t){this.selectedFiles=t.target.files[0],console.log(this.selectedFiles),this.selectedFileName=this.selectedFiles.name,this.fileType=this.selectedFiles.name.split(".")[1]}deleteAttachment(t,e){console.log(t,e),this.commentService.deleteFile(t,e).subscribe(t=>{this.comments=t.data,this.getComments()})}changeFilter(t){this.isLoadingTask=!0,this.selectionFilter=t,this.taskService.getTaskByTicketId(this.perPage,this.currentPage,this.search,this.data.tid,{userId:null,filter:t}).subscribe(t=>{this.tasks=t.data,this.isLoadingTask=!1,this.clearFilter=!1,document.getElementById("task").scrollIntoView()})}changeTage(t){this.isLoadingTask=!0,this.clearFilter=!0,this.selectionFilter=t.name,this.taskService.getTaskByTicketId(this.perPage,this.currentPage,this.search,this.data.tid,{userId:null,filter:null,tage:t.name}).subscribe(t=>{this.tasks=t.data,this.isLoadingTask=!1,document.getElementById("task").scrollIntoView()})}getTasks(){this.taskService.getTaskByTicketId(this.perPage,this.currentPage,this.search,this.data.tid,{userId:null,filter:null,tage:null}).subscribe(t=>{this.tasks=t.data,this.isLoadingTask=!1})}viewPage(t){this.viewpage=t,"comments"==t?(this.isLoadingComments=!0,this.getComments()):"attachments"==t?this.getTasks():"tasks"==t&&(this.isLoadingTask=!0,this.getTasks())}assignUsers(t){this.visible=!t}onComment(t){this.isLoadingComments=!0;let e={};e.comment=t.value.comment,e.pid=this.ticket.projectId._id,e.tid=this.ticket._id,e.file=this.selectedFiles,e.filename=this.selectedFiles.name,e.fileType=this.fileType,this.commentService.addComment(e).subscribe(e=>{this.isLoadingComments=!1,this.selectedFileName="",this.selectedFiles=[],this.fileType="",this.getComments(),t.reset()},t=>{this.isLoadingComments=!1})}searchUsers(t){if(t){var e=this.ticket.projectId.assignedUsers.filter(e=>e.first_name.toLowerCase().includes(t)||e.last_name.toLowerCase().includes(t));console.log(e),this.searchUser=e}}displayFn(t){return t?t.first_name+" "+t.last_name:""}onSelection(t){const e=t.option.value;let n=this.assignedUsers.findIndex(t=>t._id===e._id);console.log(n,e),-1==n?(this.assignedUsers.push(t.option.value),this.assigneeInput.nativeElement.value="",this.fruitCtrl.setValue(null)):(this.sankBardata.message="User Allready Exist in this Task.",this.openSnakBar(),this.fruitCtrl.setValue(null))}selected(t){this.assignedUsers.push(t.option.viewValue),this.assignedUsers.nativeElement.value="",this.assignedUsers.setValue(null)}remove(t){const e=this.assignedUsers.indexOf(t);e>=0&&this.assignedUsers.splice(e,1)}close(){this.dialogRef.close()}filter(t){this.isLoadingTask=!0,this.taskService.getTaskByTicketId(this.perPage,this.currentPage,this.search,this.data.tid,{userId:t._id}).subscribe(t=>{this.tasks=t.data,this.isLoadingTask=!1,this.clearFilter=!0,document.getElementById("task").scrollIntoView()})}removeFilter(){this.isLoadingTask=!0,this.clearFilter=!1,this.getTasks()}openSnakBar(){let t=new d.b;t.verticalPosition=this.verticalPos,t.horizontalPosition=this.horizontalPos,t.duration=8e3,this._snackBar.open(this.sankBardata.message,"Ok",t)}formateName(t,e){return t.charAt(0).toUpperCase()+e.charAt(0).toUpperCase()}editTask(t){console.log(t),this.editSingleTaskForm=t,this.isEdit=!0}onEdit(t,e){console.log(t,e.target.innerText,"000000"),t.task_name=e.target.innerText,this.taskService.updateTask(t).subscribe(t=>{this.assignedUsers=[],this.sankBardata.message="Task Updated.",this.openSnakBar(),this.visible=!1,this.getTasks()})}onChangeStatus(t,e,n){let i={id:t._id};console.log(t,n,e),"priority"==e?(i.task_priority=!t.task_priority,i.status=t.status,i.starred=t.starred):"starred"==e?(i.starred=!t.starred,i.task_priority=t.task_priority,i.status=t.status):(i.starred=t.starred,i.status=n,i.task_priority=t.task_priority),this.taskService.updateTaskStatus(i).subscribe(t=>{this.getTasks()})}openDialog(t,e){const n=new s.e;n.disableClose=!1,n.autoFocus=!0,n.width="620px",n.backdropClass="background-color:#000",n.data={task:t,mode:e},this.dialog.open(qt,n).afterClosed().subscribe(t=>{this.isLoadingTask=!0,this.getTasks()})}}return t.\u0275fac=function(e){return new(e||t)(b.Rb(ct),b.Rb(_t),b.Rb(v),b.Rb(Wt),b.Rb(d.a),b.Rb(s.h),b.Rb(s.b),b.Rb(s.a))},t.\u0275cmp=b.Lb({type:t,selectors:[["app-comments"]],viewQuery:function(t,e){var n;1&t&&(b.Zc(Vt,!0),b.Zc(Nt,!0)),2&t&&(b.Fc(n=b.kc())&&(e.assigneeInput=n.first),b.Fc(n=b.kc())&&(e.matAutocomplete=n.first))},decls:2,vars:2,consts:[["class","example-margin","mode","indeterminate","diameter","40","value","20",4,"ngIf"],[4,"ngIf"],["mode","indeterminate","diameter","40","value","20",1,"example-margin"],["mat-dialog-title",""],["matDialogClose","","mat-mini-fab","",2,"float","right",3,"click"],[2,"font-size","19px"],[1,"row",2,"text-align","center"],[1,"col-md-4","col-sm-12"],["mat-button","",1,"tab_btn",3,"ngClass","click"],["md-list-icon",""],["mat-dialog-content","",1,"font"],["chipList",""],["mat-button","","matTooltip","Assigned Users"],[3,"matTooltip","click",4,"ngFor","ngForOf"],["style","width:70px;",3,"selectable","removable","removed",4,"ngIf"],[3,"matTooltip","click"],[1,"formate_chip"],[2,"width","70px",3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[1,"row"],[1,"col-md-2"],[1,"mat_label"],[1,"col-md-10"],[1,"mat-desc"],[1,"container"],[3,"submit"],["commentForm","ngForm"],[1,"col-md-9"],["appearance","outline"],["matInput","","name","comment","type","text","placeholder","Write Comment Here ...","required","",3,"ngModel","ngModelChange"],["descInput","ngModel"],["matSuffix",""],[1,"col-md-3",2,"text-align","left"],["type","file",2,"width","40px",3,"change"],["filePicker",""],["mat-stroked-button","",1,"comment_btn",3,"click"],["matTooltip","Attachment","matSuffix",""],["mat-stroked-button","","color","primary",1,"comment_btn",3,"disabled"],["matTooltip","Save Your Comment","type","submit","matSuffix",""],["class","file_name",3,"matTooltip",4,"ngIf"],[1,"spinner_center"],["class","example-margin","mode","indeterminate","diameter","20","value","20",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"file_name",3,"matTooltip"],["mode","indeterminate","diameter","20","value","20",1,"example-margin"],["class","msj macro",4,"ngIf"],["class","msj-rta macro",4,"ngIf"],[1,"msj","macro"],[1,"text","text-l"],[1,"img-circle",3,"matTooltip"],[1,"msj-rta","macro"],[1,"text","text-r"],[1,"img-circle",2,"float","right","padding","5px",3,"matTooltip"],["target","_blank",3,"matTooltip","href",4,"ngIf"],["target","_blank",3,"matTooltip","href"],["md-list-icon","",2,"font-size","16px","float","left"],["class","container",4,"ngFor","ngForOf"],[1,"attachment-thumbnail"],["target","_blank",1,"attachment-thumbnail-preview","js-open-viewer","attachment-thumbnail-preview-is-cover",3,"href","title"],["class","file_type",4,"ngIf"],[1,"attachment-thumbnail-details","js-open-viewer"],[1,"attachment-thumbnail-name"],["href","","target","_blank","rel","noreferrer nofollow noopener",1,"attachment-thumbnail-details-title-action","dark-hover","js-attachment-action","js-direct-link"],[1,"icon-sm","icon-external-link"],[1,"u-block","quiet","attachment-thumbnail-details-title-options"],["dt","2020-01-08T10:23:41.360Z","title","January 8, 2020 3:50 PM",1,"date"],[1,"attachment-thumbnail-details-title-options-item","dark-hover","js-confirm-delete"],["mat-button","",1,"del_att",3,"click"],[1,"file_type"],["top",""],[1,"side_nav_filter"],[2,"background-color","#eaeaea","height","100%","border-radius","7px"],[2,"padding","0px 15px 0px 18px"],["matTooltip","Starred",3,"ngClass","click"],["fxFlex","10"],[1,"sidenav-item"],["matTooltip","Priority",3,"ngClass","click"],["matTooltip","Sheduled",3,"ngClass","click"],["matTooltip","Today",3,"ngClass","click"],["matTooltip","Done",3,"ngClass","click"],["matTooltip","Deleted",3,"ngClass","click"],[1,"side_nav_content"],["matTooltip","Tags",1,"tags"],["class","tag",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],["matTooltip","Add New Task","mat-mini-fab","",2,"float","right",3,"click"],[2,"max-height","335px","overflow-y","scroll","height","335px"],["style","text-align: center;",4,"ngIf"],["id","task"],["class","task_matcard",4,"ngFor","ngForOf"],[1,"tag",3,"ngClass","ngStyle","click"],[2,"text-align","center"],[1,"task_matcard"],[1,"task_task"],[2,"flex","1 1 0%","box-sizing","border-box"],[2,"font-size","15px","font-weight","600",3,"ngClass"],[2,"margin-top","4px",3,"ngClass"],[2,"padding","11px 0px 3px 0px"],["class","name_circle",3,"matTooltip",4,"ngFor","ngForOf"],["matTooltip","Add New User",3,"click"],[2,"font-size","12px"],["class","tags","style","flex-flow: row wrap; box-sizing: border-box; display: flex; place-content: center flex-start; align-items: center;",4,"ngIf"],[1,"task_tags"],["matTooltip","Change Task Status (or) Move","mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["xPosition","before"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"name_circle",3,"matTooltip"],[1,"tags",2,"flex-flow","row wrap","box-sizing","border-box","display","flex","place-content","center flex-start","align-items","center"],["class","tag",3,"ngStyle",4,"ngFor","ngForOf"],[1,"tag",3,"ngStyle"]],template:function(t,e){1&t&&(b.Rc(0,Yt,1,0,"mat-progress-spinner",0),b.Rc(1,Ie,38,15,"div",1)),2&t&&(b.vc("ngIf",e.isLoading),b.Cb(1),b.vc("ngIf",!e.isLoading))},directives:[i.m,V.a,s.i,X.b,s.d,M.a,i.k,s.f,T.b,G.a,i.l,T.a,T.c,_.g,c.x,c.n,c.o,_.c,k.b,c.b,c.u,c.m,c.p,_.h,X.a,_.b,Kt.c,Kt.a,i.n,K.a,Gt.c,Gt.d,Gt.a],pipes:[i.e],styles:['.form[_ngcontent-%COMP%]{line-height:normal}mat-form-field[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}mat-spinner[_ngcontent-%COMP%]{margin:auto}.image-preview[_ngcontent-%COMP%]{height:5rem;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.select_role[_ngcontent-%COMP%]{width:auto}.btn-success[_ngcontent-%COMP%]:hover{color:#0747a6!important;background-color:#fff!important;border-color:#0747a6!important}.btn-success[_ngcontent-%COMP%]{color:#fff!important;background-color:#0747a6!important;border-color:#0747a6!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#fff!important;color:#f89b46}.mat-raised-button[disabled][_ngcontent-%COMP%]:not([class*=mat-elevation-z]){color:#b3b7bd!important;background-color:#fff!important;border-color:red!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important}.mat-fab.mat-accent[_ngcontent-%COMP%], .mat-flat-button.mat-accent[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%], .mat-raised-button.mat-accent[_ngcontent-%COMP%]{background-color:#fff;color:#f89b46}.mat-fab.mat-accent[_ngcontent-%COMP%], .mat-flat-button.mat-accent[_ngcontent-%COMP%], .mat-mini-fab.mat-accent[_ngcontent-%COMP%]:hover, .mat-raised-button.mat-accent[_ngcontent-%COMP%]{background-color:#f89b46;color:#fff}.mat-button.mat-primary[_ngcontent-%COMP%], .mat-icon-button.mat-primary[_ngcontent-%COMP%], .mat-stroked-button.mat-primary[_ngcontent-%COMP%]{background-color:#fff;color:#f89b46}.mat-button.mat-primary[_ngcontent-%COMP%], .mat-icon-button.mat-primary[_ngcontent-%COMP%], .mat-stroked-button.mat-primary[_ngcontent-%COMP%]:hover{background-color:#f89b46;color:#fff}.comment_btn[_ngcontent-%COMP%]{border-radius:17px}body[_ngcontent-%COMP%]{font:12px/1.5 PT Sans,serif;margin:25px}.tags[_ngcontent-%COMP%]{list-style:none;margin:0;overflow:hidden;padding:10px}.tags[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0;position:relative}.side_nav_filter[_ngcontent-%COMP%]{width:185px;height:394px;padding:4px}.side_nav_content[_ngcontent-%COMP%]{width:710px}.active_filter[_ngcontent-%COMP%], .active_tag[_ngcontent-%COMP%]{background-color:#eee}.priority_true[_ngcontent-%COMP%]{color:red!important}.priority_false[_ngcontent-%COMP%]{color:#000!important}.starred_true[_ngcontent-%COMP%]{color:#ffc107!important}.starred_false[_ngcontent-%COMP%]{color:#000!important}.spinner_center[_ngcontent-%COMP%]{display:flex;justify-content:center}.tag[_ngcontent-%COMP%]{background:#eee;border-radius:3px 0 0 3px;color:#000;display:inline-block;height:26px;line-height:26px;padding:0 15px 0 18px;position:relative;margin:0 4px 0 0;text-decoration:none}.tag[_ngcontent-%COMP%]:before{border-radius:10px;box-shadow:inset 0 1px rgba(0,0,0,.25);height:6px;left:10px;width:6px;top:10px}.tag[_ngcontent-%COMP%]:after, .tag[_ngcontent-%COMP%]:before{background:#fff;content:"";position:absolute}.tag[_ngcontent-%COMP%]:after{border-bottom:13px solid transparent;border-left:10px solid #eee;border-top:13px solid transparent;right:0;top:0}.task_done[_ngcontent-%COMP%]{text-decoration:line-through}.tag[_ngcontent-%COMP%]:hover{background-color:#fff;color:#fff}.tag[_ngcontent-%COMP%]:hover:after{border-left-color:#fff}.task_matcard[_ngcontent-%COMP%]{display:block;background-color:#fff;position:relative;padding:16px 16px 0 8px;border-bottom:1px solid;text-transform:none;cursor:pointer;flex-shrink:0}mat-list-item[_ngcontent-%COMP%]{border-radius:25px!important;margin:1px}.task_tages[_ngcontent-%COMP%]{flex-direction:row}.task_tages[_ngcontent-%COMP%], .task_task[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;place-content:center flex-start;align-items:center}.task_task[_ngcontent-%COMP%]{flex-direction:row;flex:1 1 0%}.sidenav-item[_ngcontent-%COMP%]{padding:15px;font-size:15px}.msg_send_btn[_ngcontent-%COMP%]{background:#05728f none repeat scroll 0 0;border:none;border-radius:50%;color:#fff;cursor:pointer;font-size:17px;height:33px;position:absolute;right:0;top:11px;width:33px}.mat-desc[_ngcontent-%COMP%]{font:400 14px/24px Roboto,Helvetica Neue,sans-serif;letter-spacing:inherit}.mat_label[_ngcontent-%COMP%]{font-weight:500;font-size:18px}.avatar_l[_ngcontent-%COMP%]{justify-content:left}.avatar_l[_ngcontent-%COMP%], .avatar_r[_ngcontent-%COMP%]{display:flex;align-items:center;width:25%;float:left;padding-right:10px}.avatar_r[_ngcontent-%COMP%]{justify-content:flex-end}.mytext[_ngcontent-%COMP%]{border:0;padding:10px;background:#f5f5f5}.text[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.text[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:first-of-type{width:100%;margin-top:0;margin-bottom:auto;line-height:13px;font-size:14px}.text[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:last-of-type{width:100%;text-align:right;color:silver;margin-bottom:-7px;margin-top:auto}.text-l[_ngcontent-%COMP%]{float:left;padding-right:10px}.text-r[_ngcontent-%COMP%]{float:right;padding-left:10px}.avatar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:25%;float:left;padding-right:10px}.macro[_ngcontent-%COMP%]{margin-top:5px;width:65%;border-radius:5px;padding:5px;display:flex}.msj-rta[_ngcontent-%COMP%]{float:right;background:#e0e0de}.msj[_ngcontent-%COMP%]{float:left;background:#fbe8d6}.frame[_ngcontent-%COMP%]{background:#e0e0de;height:450px;overflow:hidden;padding:0}.frame[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type{position:absolute;bottom:0;width:100%;display:flex}.small[_ngcontent-%COMP%], small[_ngcontent-%COMP%]{font-size:90%;font-weight:500;color:#000}.msj[_ngcontent-%COMP%]:before{left:-14px;border-color:transparent #fbe8d6 transparent transparent;border-width:0 13px 13px 0}.msj-rta[_ngcontent-%COMP%]:after, .msj[_ngcontent-%COMP%]:before{width:0;height:0;content:"";top:-5px;position:relative;border-style:solid}.msj-rta[_ngcontent-%COMP%]:after{left:15px;border-color:#e0e0de transparent transparent;border-width:13px 13px 0 0}input[_ngcontent-%COMP%]:focus{outline:none}[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#d4d4d4}[_ngcontent-%COMP%]::-moz-placeholder{color:#d4d4d4}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#d4d4d4}[_ngcontent-%COMP%]:-moz-placeholder{color:#d4d4d4}.mat-chip[_ngcontent-%COMP%], .mat-chip-ripple[_ngcontent-%COMP%]{white-space:nowrap;width:113px;overflow:hidden;text-overflow:ellipsis}.formate_chip[_ngcontent-%COMP%]{white-space:nowrap!important;width:100px!important;overflow:hidden!important;text-overflow:ellipsis!important}.btn_list[_ngcontent-%COMP%]{width:15%;margin:6px 15px 1px 11px;border:.6px solid #000}.ribbon[_ngcontent-%COMP%]{width:0;height:0;content:"";top:-5px;left:15px;position:relative;border-color:#e0e0de transparent transparent;border-style:solid;border-width:13px 13px 0 0}.img-circle[_ngcontent-%COMP%]{padding:7px}.img-circle[_ngcontent-%COMP%], .img-circle1[_ngcontent-%COMP%]{background-color:#fdfdfd;width:30px;font-weight:800;height:30px;border-radius:14px;text-align:center}.img-circle1[_ngcontent-%COMP%]{padding:5px}.task_card[_ngcontent-%COMP%]{margin:5px 48px;background:#eceaea;min-height:auto;height:50px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item.mat-3-line[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option.mat-3-line[_ngcontent-%COMP%]{border:1px solid #b7b6b6;height:88px;background:#fff;top:6px;margin:0 0 8px 2px;border-radius:10px}.mat-list-base[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]   .mat-list-item-content[_ngcontent-%COMP%], .mat-list-base[_ngcontent-%COMP%]   .mat-list-option[_ngcontent-%COMP%]   .mat-list-item-content[_ngcontent-%COMP%]:hover{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;background:#e0e0de;position:relative;height:inherit}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%], .example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.example-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.example-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.btn[_ngcontent-%COMP%]{cursor:pointer}.full-width[_ngcontent-%COMP%]{width:80%;margin-top:20px}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.todoitem[_ngcontent-%COMP%]{margin:5px 0;color:#171717;text-overflow:ellipsis;border-radius:8px}.done-true[_ngcontent-%COMP%]{-webkit-text-decoration:line-through #d50000;text-decoration:line-through #d50000}.done-false[_ngcontent-%COMP%]{text-decoration:none}section[_ngcontent-%COMP%]{display:table;margin:8px}.example-label[_ngcontent-%COMP%]{font-size:14px;margin-left:8px;width:120px}.example-button-row[_ngcontent-%COMP%], .example-label[_ngcontent-%COMP%]{display:table-cell}.example-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:table-cell;margin-right:8px}.example-flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:480px}.example-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:120px}.name_circle[_ngcontent-%COMP%]{padding:9px;background:#a9a9a9;color:#000;font:10px Arial,sans-serif}.name_circle[_ngcontent-%COMP%], .name_circle[_ngcontent-%COMP%]:hover{border-radius:50%;text-align:center}.name_circle[_ngcontent-%COMP%]:hover{padding:10px;background:#fff;color:#f89b46;font:11px Arial,sans-serif}.attachment-thumbnail[_ngcontent-%COMP%]{border-radius:3px;min-height:80px;margin:0 0 8px;overflow:hidden;position:relative}.attachment-thumbnail-preview[_ngcontent-%COMP%]{background-color:rgba(9,30,66,.04);background-position:50%;background-size:contain;background-repeat:no-repeat;border-radius:3px;height:80px;margin-top:-40px;position:absolute;top:50%;left:0;text-align:center;text-decoration:none;z-index:1;width:112px}.attachment-thumbnail-details[_ngcontent-%COMP%]{box-sizing:border-box;cursor:pointer;padding:8px 8px 8px 128px;min-height:80px;margin:0;z-index:0}pre[_ngcontent-%COMP%]{white-space:pre-wrap;font-family:Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:15px;line-height:20px;color:#000;font-weight:500}.tab_btn[_ngcontent-%COMP%]{width:100%;color:#af9c9c}.file_type[_ngcontent-%COMP%]{font-size:27px;color:#fff;margin-top:15px!important}.tab_btn_active[_ngcontent-%COMP%]{width:100%;background-color:#dedede}.del_att[_ngcontent-%COMP%]{color:#fff;border:.1px solid;background:#e99446;border-radius:7px;padding:4px;margin:8px}input[type=file][_ngcontent-%COMP%]{visibility:hidden}.attachment-thumbnail-details[_ngcontent-%COMP%]   .attachment-thumbnail-name[_ngcontent-%COMP%]{font-weight:700;word-wrap:break-word}.attachment-thumbnail-details-title-action[_ngcontent-%COMP%]{padding-left:3px}.attachment-thumbnail-details-title-options[_ngcontent-%COMP%]{margin-bottom:8px}.file_name[_ngcontent-%COMP%]{white-space:nowrap;width:200px;overflow:hidden;text-overflow:ellipsis}@media (min-width:1025px) and (max-width:1280px){.side_nav_filter[_ngcontent-%COMP%]{width:185px;height:394px;padding:4px}.side_nav_content[_ngcontent-%COMP%]{width:722px}}@media (min-width:768px) and (max-width:1024px){.side_nav_filter[_ngcontent-%COMP%]{width:150px;height:394px;padding:4px}.side_nav_content[_ngcontent-%COMP%]{width:600px}}@media (min-width:767px) and (max-width:1023px) and (orientation:landscape){.side_nav_filter[_ngcontent-%COMP%]{width:130px;height:394px;padding:4px}.side_nav_content[_ngcontent-%COMP%]{width:430px}}']}),t})();var je=n("qb46"),Se=n("+0xr");function Re(t,e){if(1&t&&(b.Xb(0,"div"),b.Sb(1,"canvas",29),b.Wb()),2&t){const t=b.nc();b.Cb(1),b.vc("datasets",t.ChartData)("labels",t.Labels)("options",t.ChartOptions)("legend",t.ChartLegend)("chartType",t.ChartType)}}function Ue(t,e){1&t&&(b.Xb(0,"th",30),b.Tc(1," Ticket "),b.Wb())}function De(t,e){if(1&t&&(b.Xb(0,"td",31),b.Tc(1),b.Wb()),2&t){const t=e.$implicit;b.wc("matTooltip",t.ticket_name),b.Cb(1),b.Vc(" ",t.ticket_name," ")}}function Fe(t,e){1&t&&(b.Xb(0,"th",32),b.Tc(1," Created At "),b.Wb())}function Le(t,e){if(1&t&&(b.Xb(0,"td",31),b.oc(1,"date"),b.Tc(2),b.oc(3,"date"),b.Wb()),2&t){const t=e.$implicit;b.xc("matTooltip","Last Updated By ",b.qc(1,2,t.updatedAt,"medium"),""),b.Cb(2),b.Vc(" ",b.qc(3,5,t.createdAt,"medium")," ")}}function Ae(t,e){1&t&&(b.Xb(0,"th",32),b.Tc(1,"Status "),b.Wb())}function ze(t,e){if(1&t&&(b.Xb(0,"mat-option",38),b.Tc(1),b.Wb()),2&t){const t=e.$implicit;b.vc("value",t),b.Cb(1),b.Vc(" ",t," ")}}function Ee(t,e){if(1&t){const t=b.Yb();b.Xb(0,"td",33),b.Xb(1,"mat-form-field",34),b.Xb(2,"mat-label"),b.Tc(3,"Ticket Status"),b.Wb(),b.Xb(4,"mat-select",35,36),b.jc("selectionChange",(function(){b.Kc(t);const n=e.$implicit,i=b.Gc(5);return b.nc().onChangeStatus("status",i.value,n._id,n.ticket_priority)})),b.Rc(6,ze,2,2,"mat-option",37),b.Wb(),b.Wb(),b.Wb()}if(2&t){const t=e.$implicit,n=b.nc();b.Cb(4),b.wc("value",t.status),b.Cb(2),b.vc("ngForOf",n.ticket_status)}}function $e(t,e){1&t&&(b.Xb(0,"th",39),b.Tc(1,"Action "),b.Wb())}function Be(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-icon",45),b.jc("click",(function(){b.Kc(t);const e=b.nc().$implicit;return b.nc().openDialog(e._id,"edit")})),b.Tc(1,"edit"),b.Wb()}}function qe(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-icon",46),b.jc("click",(function(){b.Kc(t);const e=b.nc().$implicit;return b.nc().onDelete(e._id)})),b.Tc(1,"delete"),b.Wb()}}function Ke(t,e){if(1&t){const t=b.Yb();b.Xb(0,"td",40),b.Rc(1,Be,2,0,"mat-icon",41),b.Rc(2,qe,2,0,"mat-icon",42),b.Xb(3,"mat-icon",43),b.jc("click",(function(){b.Kc(t);const n=e.$implicit;return b.nc().ticketInfoDialog(n._id)})),b.Tc(4,"info"),b.Wb(),b.Xb(5,"mat-icon",44),b.jc("click",(function(){b.Kc(t);const n=e.$implicit;return b.nc().commentsDialog(n.projectId._id,n._id)})),b.Tc(6,"chat"),b.Wb(),b.Wb()}if(2&t){const t=b.nc();b.Cb(1),b.vc("ngIf",3!=t.userData.role),b.Cb(1),b.vc("ngIf",3!=t.userData.role)}}function Ge(t,e){1&t&&b.Sb(0,"tr",47)}function Ve(t,e){1&t&&b.Sb(0,"tr",48)}function Ne(t,e){1&t&&b.Sb(0,"mat-progress-spinner",49)}function Ye(t,e){1&t&&(b.Xb(0,"p",50),b.Tc(1,"No Tickets Found!"),b.Wb())}function He(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-paginator",51),b.jc("page",(function(e){return b.Kc(t),b.nc().onChangedPage(e)})),b.Wb()}if(2&t){const t=b.nc();b.vc("length",t.Count)("pageSize",t.perPage)("pageSizeOptions",t.sizeOptions)}}let Ze=(()=>{class t{constructor(t,e,n,i,a){this.ticketsService=t,this.activatedRoute=e,this.dialog=n,this.projectsService=i,this.router=a,this.tickets=[],this.isLoading=!1,this.perPage=10,this.currentPage=1,this.Count=0,this.projectData=[],this.sizeOptions=[10,20,50],this.ticket_priority=["High","Medium","Low"],this.ticket_status=["Open","Pending","Done","Closed"],this.displayedColumns1=["Ticket","Created At","Status","Action"],this.ChartData=[{data:[0,0,0,0,0],label:"Tages",lineTension:6,pointRadius:[4,4,4,4],borderWidth:2}],this.Labels=["Frontend","Backend","API","Issue","Mobile","Future","Other"],this.ChartOptions={responsive:!0,tooltips:{enabled:!0},plugins:{datalabels:{anchor:"top",align:"top",font:{size:12}}}},this.barChartPlugins=[je],this.ChartLegend=!0,this.ChartType="doughnut",this.activatedRoute.paramMap.subscribe(t=>{this.pid=t.get("pid")})}ngOnInit(){this.isLoading=!0,this.userData=this.ticketsService.getUserData(),this.projectsService.getProjectById(this.pid).subscribe(t=>{this.projectData=t.data[0],this.ticketsService.getTicketsByProjectId(this.perPage,this.currentPage,this.search,this.pid).subscribe(t=>{this.tickets=t.data,this.Count=t.count,this.ticketsService.getTicketTages(this.pid).subscribe(t=>{this.ChartData[0].data=t.data,this.isLoading=!1})})})}onDelete(t){this.ticketsService.deleteTicket(t).subscribe(t=>{this.ngOnInit()})}onSearch(){this.ngOnInit()}onChangedPage(t){this.isLoading=!0,this.currentPage=t.pageIndex+1,this.perPage=t.pageSize,this.ngOnInit()}onChangeStatus(t,e,n,i){let a={id:n};"priority"==t?(a.status=i,a.ticket_priority=e,this.ticketsService.updateTicketStatus(a).subscribe(t=>{this.ngOnInit()})):"status"==t&&(a.ticket_priority=i,a.status=e,this.ticketsService.updateTicketStatus(a).subscribe(t=>{this.ngOnInit()}))}openDialog(t,e){const n=new s.e;n.disableClose=!0,n.autoFocus=!0,n.data={id:t,pid:this.pid,mode:e},this.dialog.open(pt,n).afterClosed().subscribe(t=>{this.ngOnInit()})}ticketInfoDialog(t){const e=new s.e;e.disableClose=!1,e.autoFocus=!0,e.width="598px",e.data={id:t},this.dialog.open(Ct,e).afterClosed().subscribe(t=>{this.ngOnInit()})}commentsDialog(t,e){const n=new s.e;n.disableClose=!1,n.autoFocus=!0,n.width="962px",n.minHeight="563px",n.data={pid:t,tid:e},this.dialog.open(we,n).afterClosed().subscribe(t=>{this.ngOnInit()})}}return t.\u0275fac=function(e){return new(e||t)(b.Rb(ct),b.Rb(r.a),b.Rb(s.b),b.Rb(v),b.Rb(r.b))},t.\u0275cmp=b.Lb({type:t,selectors:[["app-tickets"]],decls:38,vars:8,consts:[[1,"card-container"],[1,"container"],[1,"row"],[1,"col-md-6",2,"background-color","#fafafa"],[4,"ngIf"],[1,"col-md-6"],["action","#","autocomplete","off"],[2,"width","45%"],["matInput","","name","name","type","text","placeholder","Search",3,"ngModel","ngModelChange","keyup"],["nameInput","ngModel"],["md-list-icon",""],[1,"btn","btn-success","float-right",3,"click"],[1,"card-container1"],["mat-table","",1,"mat-elevation-z8","table-striped",3,"dataSource"],["matColumnDef","Ticket"],["mat-header-cell","","style","width:50%",4,"matHeaderCellDef"],["mat-cell","",3,"matTooltip",4,"matCellDef"],["matColumnDef","Created At"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","Status"],["mat-cell","",4,"matCellDef"],["matColumnDef","Action"],["mat-header-cell","","style","text-align: center;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","example-margin","mode","indeterminate","diameter","40","value","20",4,"ngIf"],["class","info-text mat-body-1",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],["baseChart","","width","800","height","200",3,"datasets","labels","options","legend","chartType"],["mat-header-cell","",2,"width","50%"],["mat-cell","",3,"matTooltip"],["mat-header-cell",""],["mat-cell",""],["appearance","outline",1,"status_cus"],["name","status","placeholder","Select Status",3,"value","selectionChange"],["ticketSInput",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-header-cell","",2,"text-align","center"],["mat-cell","",2,"text-align","center"],["color","primary","matTooltip","Edit","md-list-icon","",3,"click",4,"ngIf"],["color","warn","matTooltip","Delete","md-list-icon","",3,"click",4,"ngIf"],["md-list-icon","","matTooltip","Ticket Info",3,"click"],["md-list-icon","","color","accent","matTooltip","Comments / Chat",3,"click"],["color","primary","matTooltip","Edit","md-list-icon","",3,"click"],["color","warn","matTooltip","Delete","md-list-icon","",3,"click"],["mat-header-row",""],["mat-row",""],["mode","indeterminate","diameter","40","value","20",1,"example-margin"],[1,"info-text","mat-body-1"],[3,"length","pageSize","pageSizeOptions","page"]],template:function(t,e){1&t&&(b.Xb(0,"div",0),b.Xb(1,"div",1),b.Xb(2,"div",2),b.Xb(3,"div",3),b.Rc(4,Re,2,5,"div",4),b.Wb(),b.Xb(5,"div",5),b.Xb(6,"mat-card"),b.Xb(7,"form",6),b.Xb(8,"mat-form-field",7),b.Xb(9,"input",8,9),b.jc("ngModelChange",(function(t){return e.search=t}))("keyup",(function(){return e.onSearch()})),b.Wb(),b.Wb(),b.Xb(11,"mat-icon",10),b.Tc(12,"search"),b.Wb(),b.Xb(13,"button",11),b.jc("click",(function(){return e.openDialog(0,"create")})),b.Tc(14,"+ Ticket"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Sb(15,"br"),b.Xb(16,"div",12),b.Xb(17,"table",13),b.Vb(18,14),b.Rc(19,Ue,2,0,"th",15),b.Rc(20,De,2,2,"td",16),b.Ub(),b.Vb(21,17),b.Rc(22,Fe,2,0,"th",18),b.Rc(23,Le,4,8,"td",16),b.Ub(),b.Vb(24,19),b.Rc(25,Ae,2,0,"th",18),b.Rc(26,Ee,7,2,"td",20),b.Ub(),b.Vb(27,21),b.Rc(28,$e,2,0,"th",22),b.Rc(29,Ke,7,2,"td",23),b.Ub(),b.Rc(30,Ge,1,0,"tr",24),b.Rc(31,Ve,1,0,"tr",25),b.Wb(),b.Wb(),b.Sb(32,"br"),b.Sb(33,"br"),b.Xb(34,"div",0),b.Rc(35,Ne,1,0,"mat-progress-spinner",26),b.Rc(36,Ye,2,0,"p",27),b.Rc(37,He,1,3,"mat-paginator",28),b.Wb()),2&t&&(b.Cb(4),b.vc("ngIf",e.tickets.length>0),b.Cb(5),b.vc("ngModel",e.search),b.Cb(8),b.vc("dataSource",e.tickets),b.Cb(13),b.vc("matHeaderRowDef",e.displayedColumns1),b.Cb(1),b.vc("matRowDefColumns",e.displayedColumns1),b.Cb(4),b.vc("ngIf",e.isLoading),b.Cb(1),b.vc("ngIf",e.tickets.length<=0&&!e.isLoading),b.Cb(1),b.vc("ngIf",e.tickets.length>0))},directives:[i.m,K.a,c.x,c.n,c.o,_.c,k.b,c.b,c.m,c.p,M.a,Se.j,Se.c,Se.e,Se.b,Se.g,Se.i,a.a,Se.d,Se.a,G.a,_.g,rt.a,i.l,P.o,Se.f,Se.h,V.a,N.a],pipes:[i.e],styles:[".mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:16px;border-radius:4px;height:70px}.btn.focus[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:focus{outline:0;box-shadow:0 0 0 .2rem #fff}.btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .show[_ngcontent-%COMP%] > .btn-success.dropdown-toggle[_ngcontent-%COMP%]{color:#fff;background-color:#f89b46;border-color:#f89b46}.btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .show[_ngcontent-%COMP%] > .btn-success.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #fafafa}.mat-input-element[_ngcontent-%COMP%]:focus{font:inherit;color:#f89b46;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.btn-success[_ngcontent-%COMP%]{color:#f89b46;background-color:#fff;border-color:#f89b46}table[_ngcontent-%COMP%]{table-layout:fixed}mat-paginator[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:98%}mat-icon[_ngcontent-%COMP%]{margin:5px}.btn-success[_ngcontent-%COMP%]:hover{color:#fff;background-color:#f89b46;border-color:#f89b46}.btn-success.focus[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]:focus{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important;box-shadow:#f89b46!important}.example-card[_ngcontent-%COMP%]{width:100%;margin:15px}.example-card[_ngcontent-%COMP%]:hover{width:100%;background-color:#a09d9d}.example-header-image[_ngcontent-%COMP%]{background-image:url(/assets/proj.jpg);background-size:cover}mat-card-subtitle[_ngcontent-%COMP%], mat-card-title[_ngcontent-%COMP%]{white-space:nowrap;width:105px;overflow:hidden;text-overflow:ellipsis}.example-tooltip-red[_ngcontent-%COMP%]{background:#b71c1c!important}.mat-card[_ngcontent-%COMP%]{background:#fff;width:100%;color:#f89b46;height:90px;min-width:100%}.status_cus[_ngcontent-%COMP%]{height:55px;width:98%}.mat-form-field-type-mat-select[_ngcontent-%COMP%]:not(.mat-form-field-disabled)   .mat-form-field-flex[_ngcontent-%COMP%]{cursor:pointer!important;height:50px!important}.card-container1[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;height:auto}"]}),t})();const Qe=p.a.apiUrl+"/users",Je=p.a.apiUrl+"/courierOrders";let tn=(()=>{class t{constructor(t,e,n){this.http=t,this.router=e,this.authService=n}getOrders(t,e,n,i,a,o){var c=`?pagesize=${e}&page=${n}&start_date=${a}&end_date=${o}`;return i&&(c+="&filter="+i),t&&(c+="&orderIds="+t),this.http.get(Je+"/getOrders"+c)}addOrder(t,e){return this.http.post(Je+"/create",t)}getOrderById(t){return this.http.get(Je+"/"+t)}updateOrder(t,e){return this.http.put(Je+"/"+t._id,t)}updateOrderStatus(t,e){return this.http.put(Je+"/updateStatus/"+e,{status:t,id:e})}deleteOrder(t){return this.http.delete(Je+"/"+t)}search(t){var e="?";return t&&(e+="search="+t),this.http.get(Qe+"/search"+e).pipe(Object(g.debounceTime)(500),Object(m.a)(t=>t))}}return t.\u0275fac=function(e){return new(e||t)(b.fc(u.b),b.fc(r.b),b.fc(f.a))},t.\u0275prov=b.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const en=["assigneeInput"],nn=["auto"];function an(t,e){1&t&&(b.Xb(0,"h1",56),b.Tc(1,"Edit Order"),b.Wb())}function on(t,e){1&t&&(b.Xb(0,"h1",56),b.Tc(1,"New Order"),b.Wb())}function cn(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please enter order name."),b.Wb())}function rn(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please Enter PhoneNumber."),b.Wb())}function sn(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Mobile number should be only numbers"),b.Wb())}function ln(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Mobile should be 10digit"),b.Wb())}function dn(t,e){if(1&t&&(b.Xb(0,"mat-option",57,58),b.Tc(2),b.Wb()),2&t){const t=e.$implicit;b.vc("value",t),b.Cb(2),b.Wc(" ",t.first_name," ",t.last_name," ")}}function bn(t,e){if(1&t&&(b.Xb(0,"mat-option",57),b.Tc(1),b.Wb()),2&t){const t=e.$implicit;b.vc("value",t),b.Cb(1),b.Vc(" ",t," ")}}function mn(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please choose order type."),b.Wb())}function gn(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please enter quantity name."),b.Wb())}function pn(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please enter amount name."),b.Wb())}function un(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please enter courier branch."),b.Wb())}function fn(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please enter from address."),b.Wb())}function hn(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please enter city."),b.Wb())}function Cn(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please enter state."),b.Wb())}function vn(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please enter county."),b.Wb())}function _n(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please enter zip code."),b.Wb())}function kn(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please enter to address."),b.Wb())}function Wn(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please enter city."),b.Wb())}function Xn(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please enter state."),b.Wb())}function Mn(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please enter county."),b.Wb())}function Tn(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please enter zip code."),b.Wb())}let Pn=(()=>{class t{constructor(t,e,n,i,a,o,r){this.orderService=t,this.dialogRef=e,this.route=n,this._snackBar=i,this.router=a,this.dialog=o,this.visible=!0,this.selectable=!0,this.removable=!0,this.separatorKeysCodes=[l.g,l.c],this.fruitCtrl=new c.d,this.isLoading=!0,this.order=[],this.data=[],this.horizontalPos="right",this.verticalPos="top",this.sankBardata={},this.assignedUsers=[],this.isEdit=!0,this.services=["Parcel","Luggage","Documents","Electronics","Others"],this.data=r,this.order={_id:"",name:"",desc:"",mobile:"",email:"",type:"",qty:"",customerId:"",amount:"",from:{from_address:"",from_city:"",from_state:"",from_country:"",from_zip_code:""},to:{to_address:"",to_city:"",to_state:"",to_country:"",to_zip_code:""},location:[],assignedUsers:[]}}ngOnInit(){this.data.id&&"edit"==this.data.mode?this.orderService.getOrderById(this.data.id).subscribe(t=>{this.isLoading=!1,this.isEdit=!0,this.mode="edit",console.log("ttt",t),this.order=t.data[0]}):(this.isLoading=!1,this.mode="create",this.isEdit=!1,this.userId=null)}onSave(t){t.invalid||(console.log(this.order,t.value),"create"===this.mode?this.orderService.addOrder(this.order,this.userId).subscribe(t=>{this.dialogRef.close()},t=>{this.isLoading=!1}):this.orderService.updateOrder(this.order,t.value).subscribe(t=>{this.dialogRef.close()},t=>{this.isLoading=!1}))}searchUsers(t){t&&this.orderService.search(t).subscribe(t=>{this.searchUser=t.users})}displayFn(t){return t?t.first_name+" "+t.last_name:""}onSelection(t){const e=t.option.value;let n=this.order.assignedUsers.findIndex(t=>t._id===e._id);console.log(n,e),-1==n?this.order.assignedUsers.push(t.option.value):(this.sankBardata.message="User Allready Exist in this Project.",this.openSnakBar(),this.fruitCtrl.setValue(null))}selected(t){this.order.assignedUsers.push(t.option.viewValue),this.order.assignedUsers.nativeElement.value="",this.order.assignedUsers.setValue(null)}remove(t){const e=this.order.assignedUsers.indexOf(t);e>=0&&this.order.assignedUsers.splice(e,1)}close(){this.dialogRef.close()}openSnakBar(){let t=new d.b;t.verticalPosition=this.verticalPos,t.horizontalPosition=this.horizontalPos,t.duration=8e3,this._snackBar.open(this.sankBardata.message,"Ok",t)}}return t.\u0275fac=function(e){return new(e||t)(b.Rb(tn),b.Rb(s.h),b.Rb(r.a),b.Rb(d.a),b.Rb(r.b),b.Rb(s.b),b.Rb(s.a))},t.\u0275cmp=b.Lb({type:t,selectors:[["app-courier-project"]],viewQuery:function(t,e){var n;1&t&&(b.Zc(en,!0),b.Zc(nn,!0)),2&t&&(b.Fc(n=b.kc())&&(e.assigneeInput=n.first),b.Fc(n=b.kc())&&(e.matAutocomplete=n.first))},decls:165,vars:48,consts:[["mat-dialog-title","",4,"ngIf"],[3,"submit"],["orderForm","ngForm"],["mat-dialog-content","",1,"font"],[1,"row"],[1,"col-md-6"],["appearance","outline"],["matInput","","name","name","type","text","placeholder","Order Name","required","",3,"ngModel","ngModelChange"],["nameInput","ngModel"],[4,"ngIf"],["matInput","","name","desc","type","text","placeholder","Description",3,"ngModel","ngModelChange"],["descInput","ngModel"],["matInput","","name","mobile","type","text","mobile","","pattern","[0-9]*","minlength","10","maxlength","10","placeholder","Enter Mobile Number","required","",3,"ngModel","ngModelChange"],["mobileInput","ngModel"],["matSuffix",""],["matInput","","name","email","autocomplete","off","type","email","placeholder","Enter Your Email","email","",3,"ngModel","ngModelChange"],["emailInput","ngModel"],["type","text","name","customerId","matInput","","placeholder","Serach Customer",3,"ngModel","matAutocomplete","formControl","ngModelChange","keyup"],["assigneeInput",""],[3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["name","type","placeholder","Order Type","required","",3,"ngModel","ngModelChange"],["typeInput","ngModel"],["matInput","","name","qty","type","text","placeholder","Quantity","required","",3,"ngModel","ngModelChange"],["qtyInput","ngModel"],["matInput","","name","amount","type","text","placeholder","Amount","required","",3,"ngModel","ngModelChange"],["amtInput","ngModel"],["matInput","","name","branch","type","text","placeholder","Courier Branch","required","",3,"ngModel","ngModelChange"],["role","main",1,"content"],[1,"container"],[2,"font-family","800"],["matInput","","name","from_address","type","text","placeholder","Enter Address","required","",3,"ngModel","ngModelChange"],["Add1Input","ngModel"],["align","end"],["matInput","","name","from_city","type","text","placeholder","Enter City","required","",3,"ngModel","ngModelChange"],["cityInput","ngModel"],["matInput","","name","from_state","type","text","placeholder","Enter State","required","",3,"ngModel","ngModelChange"],["stateInput","ngModel"],["matInput","","name","from_country","type","text","placeholder","Enter Country","required","",3,"ngModel","ngModelChange"],["countryInput","ngModel"],["matInput","","name","from_zip_code","type","text","placeholder","Enter Zip","required","",3,"ngModel","ngModelChange"],["zipInput","ngModel"],["matInput","","name","to_address","type","text","placeholder","Enter Address","required","",3,"ngModel","ngModelChange"],["Add2Input","ngModel"],["matInput","","name","to_city","type","text","placeholder","Enter City","required","",3,"ngModel","ngModelChange"],["city2Input","ngModel"],["matInput","","name","to_state","type","text","placeholder","Enter State","required","",3,"ngModel","ngModelChange"],["state2Input","ngModel"],["matInput","","name","to_country","type","text","placeholder","Enter Country","required","",3,"ngModel","ngModelChange"],["country2Input","ngModel"],["matInput","","name","to_zip_code","type","text","placeholder","Enter Zip","required","",3,"ngModel","ngModelChange"],["zip2Input","ngModel"],["mat-card-actions","","align","end"],["mat-raised-button","","color","primary","matDialogClose","",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-dialog-title",""],[3,"value"],["datae",""]],template:function(t,e){if(1&t){const t=b.Yb();b.Rc(0,an,2,0,"h1",0),b.Rc(1,on,2,0,"h1",0),b.Xb(2,"form",1,2),b.jc("submit",(function(){b.Kc(t);const n=b.Gc(3);return e.onSave(n)})),b.Xb(4,"div",3),b.Xb(5,"div",4),b.Xb(6,"div",5),b.Xb(7,"mat-form-field",6),b.Xb(8,"mat-label"),b.Tc(9,"Order Name"),b.Wb(),b.Xb(10,"input",7,8),b.jc("ngModelChange",(function(t){return e.order.name=t})),b.Wb(),b.Rc(12,cn,2,0,"mat-error",9),b.Wb(),b.Wb(),b.Xb(13,"div",5),b.Xb(14,"mat-form-field",6),b.Xb(15,"mat-label"),b.Tc(16,"Description"),b.Wb(),b.Xb(17,"textarea",10,11),b.jc("ngModelChange",(function(t){return e.order.desc=t})),b.Tc(19),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(20,"div",4),b.Xb(21,"div",5),b.Xb(22,"mat-form-field",6),b.Xb(23,"mat-label"),b.Tc(24,"Mobile"),b.Wb(),b.Xb(25,"input",12,13),b.jc("ngModelChange",(function(t){return e.order.mobile=t})),b.Wb(),b.Xb(27,"mat-icon",14),b.Tc(28,"call"),b.Wb(),b.Rc(29,rn,2,0,"mat-error",9),b.Rc(30,sn,2,0,"mat-error",9),b.Rc(31,ln,2,0,"mat-error",9),b.Wb(),b.Wb(),b.Xb(32,"div",5),b.Xb(33,"mat-form-field",6),b.Xb(34,"mat-label"),b.Tc(35,"Email"),b.Wb(),b.Xb(36,"input",15,16),b.jc("ngModelChange",(function(t){return e.order.email=t})),b.Wb(),b.Xb(38,"mat-icon",14),b.Tc(39,"email"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(40,"div",4),b.Xb(41,"div",5),b.Xb(42,"mat-form-field",6),b.Xb(43,"mat-label"),b.Tc(44,"If Existing Customer..."),b.Wb(),b.Xb(45,"input",17,18),b.jc("ngModelChange",(function(t){return e.order.customerId=t}))("keyup",(function(){b.Kc(t);const n=b.Gc(46);return e.searchUsers(n.value)})),b.Wb(),b.Xb(47,"mat-autocomplete",19,20),b.Rc(49,dn,3,3,"mat-option",21),b.Wb(),b.Wb(),b.Wb(),b.Xb(50,"div",5),b.Xb(51,"mat-form-field",6),b.Xb(52,"mat-label"),b.Tc(53,"Type"),b.Wb(),b.Xb(54,"mat-select",22,23),b.jc("ngModelChange",(function(t){return e.order.type=t})),b.Rc(56,bn,2,2,"mat-option",21),b.Wb(),b.Rc(57,mn,2,0,"mat-error",9),b.Wb(),b.Wb(),b.Wb(),b.Xb(58,"div",4),b.Xb(59,"div",5),b.Xb(60,"mat-form-field",6),b.Xb(61,"mat-label"),b.Tc(62,"Quantity"),b.Wb(),b.Xb(63,"input",24,25),b.jc("ngModelChange",(function(t){return e.order.qty=t})),b.Wb(),b.Rc(65,gn,2,0,"mat-error",9),b.Wb(),b.Wb(),b.Xb(66,"div",5),b.Xb(67,"mat-form-field",6),b.Xb(68,"mat-label"),b.Tc(69,"Amount"),b.Wb(),b.Xb(70,"input",26,27),b.jc("ngModelChange",(function(t){return e.order.amount=t})),b.Wb(),b.Rc(72,pn,2,0,"mat-error",9),b.Wb(),b.Wb(),b.Wb(),b.Xb(73,"div",4),b.Xb(74,"div",5),b.Xb(75,"mat-form-field",6),b.Xb(76,"mat-label"),b.Tc(77,"Branch"),b.Wb(),b.Xb(78,"input",28,25),b.jc("ngModelChange",(function(t){return e.order.branch=t})),b.Wb(),b.Rc(80,un,2,0,"mat-error",9),b.Wb(),b.Wb(),b.Sb(81,"div",5),b.Wb(),b.Xb(82,"div",29),b.Xb(83,"div",30),b.Xb(84,"div",4),b.Xb(85,"div",5),b.Xb(86,"div"),b.Xb(87,"p",31),b.Tc(88,"From Address"),b.Wb(),b.Wb(),b.Xb(89,"mat-form-field",6),b.Xb(90,"mat-label"),b.Tc(91,"Address"),b.Wb(),b.Xb(92,"textarea",32,33),b.jc("ngModelChange",(function(t){return e.order.from.from_address=t})),b.Tc(94),b.Wb(),b.Xb(95,"mat-hint",34),b.Tc(96,"Not more then 100 characters long."),b.Wb(),b.Rc(97,fn,2,0,"mat-error",9),b.Wb(),b.Xb(98,"mat-form-field",6),b.Xb(99,"mat-label"),b.Tc(100,"City"),b.Wb(),b.Xb(101,"input",35,36),b.jc("ngModelChange",(function(t){return e.order.from.from_city=t})),b.Wb(),b.Rc(103,hn,2,0,"mat-error",9),b.Wb(),b.Xb(104,"mat-form-field",6),b.Xb(105,"mat-label"),b.Tc(106,"State"),b.Wb(),b.Xb(107,"input",37,38),b.jc("ngModelChange",(function(t){return e.order.from.from_state=t})),b.Wb(),b.Rc(109,Cn,2,0,"mat-error",9),b.Wb(),b.Xb(110,"mat-form-field",6),b.Xb(111,"mat-label"),b.Tc(112,"Country"),b.Wb(),b.Xb(113,"input",39,40),b.jc("ngModelChange",(function(t){return e.order.from.from_country=t})),b.Wb(),b.Rc(115,vn,2,0,"mat-error",9),b.Wb(),b.Xb(116,"mat-form-field",6),b.Xb(117,"mat-label"),b.Tc(118,"Zip Code"),b.Wb(),b.Xb(119,"input",41,42),b.jc("ngModelChange",(function(t){return e.order.from.from_zip_code=t})),b.Wb(),b.Rc(121,_n,2,0,"mat-error",9),b.Wb(),b.Wb(),b.Xb(122,"div",5),b.Xb(123,"div"),b.Xb(124,"p",31),b.Tc(125,"To Address"),b.Wb(),b.Wb(),b.Xb(126,"mat-form-field",6),b.Xb(127,"mat-label"),b.Tc(128,"Address"),b.Wb(),b.Xb(129,"textarea",43,44),b.jc("ngModelChange",(function(t){return e.order.to.to_address=t})),b.Tc(131),b.Wb(),b.Xb(132,"mat-hint",34),b.Tc(133,"Not more then 100 characters long."),b.Wb(),b.Rc(134,kn,2,0,"mat-error",9),b.Wb(),b.Xb(135,"mat-form-field",6),b.Xb(136,"mat-label"),b.Tc(137,"City"),b.Wb(),b.Xb(138,"input",45,46),b.jc("ngModelChange",(function(t){return e.order.to.to_city=t})),b.Wb(),b.Rc(140,Wn,2,0,"mat-error",9),b.Wb(),b.Xb(141,"mat-form-field",6),b.Xb(142,"mat-label"),b.Tc(143,"State"),b.Wb(),b.Xb(144,"input",47,48),b.jc("ngModelChange",(function(t){return e.order.to.to_state=t})),b.Wb(),b.Rc(146,Xn,2,0,"mat-error",9),b.Wb(),b.Xb(147,"mat-form-field",6),b.Xb(148,"mat-label"),b.Tc(149,"Country"),b.Wb(),b.Xb(150,"input",49,50),b.jc("ngModelChange",(function(t){return e.order.to.to_country=t})),b.Wb(),b.Rc(152,Mn,2,0,"mat-error",9),b.Wb(),b.Xb(153,"mat-form-field",6),b.Xb(154,"mat-label"),b.Tc(155,"Zip Code"),b.Wb(),b.Xb(156,"input",51,52),b.jc("ngModelChange",(function(t){return e.order.to.to_zip_code=t})),b.Wb(),b.Rc(158,Tn,2,0,"mat-error",9),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(159,"div",53),b.Xb(160,"button",54),b.jc("click",(function(){return e.close()})),b.Tc(161,"Close"),b.Wb(),b.Tc(162,"\xa0 "),b.Xb(163,"button",55),b.Tc(164,"Save"),b.Wb(),b.Wb(),b.Wb()}if(2&t){const t=b.Gc(3),n=b.Gc(11),i=b.Gc(26),a=b.Gc(48),o=b.Gc(55),c=b.Gc(64),r=b.Gc(71),s=b.Gc(93),l=b.Gc(102),d=b.Gc(108),m=b.Gc(114),g=b.Gc(120),p=b.Gc(130),u=b.Gc(139),f=b.Gc(145),h=b.Gc(151),C=b.Gc(157);b.vc("ngIf","edit"==e.mode),b.Cb(1),b.vc("ngIf","create"==e.mode),b.Cb(9),b.vc("ngModel",e.order.name),b.Cb(2),b.vc("ngIf",n.hasError("required")),b.Cb(5),b.vc("ngModel",e.order.desc),b.Cb(2),b.Uc(e.order.desc),b.Cb(6),b.vc("ngModel",e.order.mobile),b.Cb(4),b.vc("ngIf",i.hasError("required")),b.Cb(1),b.vc("ngIf",i.hasError("pattern")),b.Cb(1),b.vc("ngIf",i.hasError("minlength")),b.Cb(5),b.vc("ngModel",e.order.email),b.Cb(9),b.vc("ngModel",e.order.customerId)("matAutocomplete",a)("formControl",e.fruitCtrl),b.Cb(2),b.vc("displayWith",e.displayFn),b.Cb(2),b.vc("ngForOf",e.searchUser),b.Cb(5),b.vc("ngModel",e.order.type),b.Cb(2),b.vc("ngForOf",e.services),b.Cb(1),b.vc("ngIf",o.hasError("required")),b.Cb(6),b.vc("ngModel",e.order.qty),b.Cb(2),b.vc("ngIf",c.hasError("required")),b.Cb(5),b.vc("ngModel",e.order.amount),b.Cb(2),b.vc("ngIf",r.hasError("required")),b.Cb(6),b.vc("ngModel",e.order.branch),b.Cb(2),b.vc("ngIf",c.hasError("required")),b.Cb(12),b.vc("ngModel",e.order.from.from_address),b.Cb(2),b.Uc(e.order.from.from_address),b.Cb(3),b.vc("ngIf",s.hasError("required")),b.Cb(4),b.vc("ngModel",e.order.from.from_city),b.Cb(2),b.vc("ngIf",l.hasError("required")),b.Cb(4),b.vc("ngModel",e.order.from.from_state),b.Cb(2),b.vc("ngIf",d.hasError("required")),b.Cb(4),b.vc("ngModel",e.order.from.from_country),b.Cb(2),b.vc("ngIf",m.hasError("required")),b.Cb(4),b.vc("ngModel",e.order.from.from_zip_code),b.Cb(2),b.vc("ngIf",g.hasError("required")),b.Cb(8),b.vc("ngModel",e.order.to.to_address),b.Cb(2),b.Uc(e.order.to.to_address),b.Cb(3),b.vc("ngIf",p.hasError("required")),b.Cb(4),b.vc("ngModel",e.order.to.to_city),b.Cb(2),b.vc("ngIf",u.hasError("required")),b.Cb(4),b.vc("ngModel",e.order.to.to_state),b.Cb(2),b.vc("ngIf",f.hasError("required")),b.Cb(4),b.vc("ngModel",e.order.to.to_country),b.Cb(2),b.vc("ngIf",h.hasError("required")),b.Cb(4),b.vc("ngModel",e.order.to.to_zip_code),b.Cb(2),b.vc("ngIf",C.hasError("required")),b.Cb(5),b.vc("disabled",e.isLoading||t.invalid)}},directives:[i.m,c.x,c.n,c.o,s.f,_.c,_.g,k.b,c.b,c.u,c.m,c.p,c.s,c.i,c.h,M.a,_.h,c.c,W.c,c.e,W.a,i.l,rt.a,_.f,X.b,s.d,s.i,_.b,P.o],styles:[".form[_ngcontent-%COMP%]{line-height:normal}mat-form-field[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}mat-spinner[_ngcontent-%COMP%]{margin:auto}.image-preview[_ngcontent-%COMP%]{height:5rem;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.select_role[_ngcontent-%COMP%]{width:auto}.btn-success[_ngcontent-%COMP%]:hover{color:#0747a6!important;background-color:#fff!important;border-color:#0747a6!important}.btn-success[_ngcontent-%COMP%]{color:#fff!important;background-color:#0747a6!important;border-color:#0747a6!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#fff!important;color:#f89b46}.mat-raised-button[disabled][_ngcontent-%COMP%]:not([class*=mat-elevation-z]){color:#b3b7bd!important;background-color:#fff!important;border-color:red!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important}.example-additional-selection[_ngcontent-%COMP%]{opacity:.75;font-size:.75em}.assign_btn[_ngcontent-%COMP%]{padding:0 28px;margin:11px}"]}),t})();function On(t,e){if(1&t&&(b.Xb(0,"mat-chip"),b.Tc(1),b.Wb()),2&t){const t=e.$implicit;b.Cb(1),b.Wc(" ",t.first_name," ",t.last_name," ")}}function yn(t,e){if(1&t&&(b.Xb(0,"div",10),b.Xb(1,"div",11),b.Xb(2,"mat-icon",12),b.Tc(3,"group"),b.Wb(),b.Xb(4,"mat-label"),b.Tc(5,"Assigned Users"),b.Wb(),b.Sb(6,"br"),b.Wb(),b.Xb(7,"div",11),b.Xb(8,"mat-chip-list",null,13),b.Rc(10,On,2,2,"mat-chip",14),b.Wb(),b.Wb(),b.Wb()),2&t){const t=b.nc(2);b.Cb(10),b.vc("ngForOf",t.project.assignedUsers)}}function xn(t,e){if(1&t&&(b.Xb(0,"mat-form-field",5),b.Xb(1,"mat-label"),b.Tc(2,"Created By"),b.Wb(),b.Sb(3,"input",6),b.Wb()),2&t){const t=b.nc(2);b.Cb(3),b.yc("value","",t.project.userId.first_name," ",t.project.userId.last_name,"")}}function In(t,e){if(1&t&&(b.Xb(0,"mat-form-field",5),b.Xb(1,"mat-label"),b.Tc(2,"Email"),b.Wb(),b.Sb(3,"input",6),b.Wb()),2&t){const t=b.nc(2);b.Cb(3),b.wc("value",t.project.userId.email)}}function wn(t,e){if(1&t&&(b.Xb(0,"mat-form-field",5),b.Xb(1,"mat-label"),b.Tc(2,"updated By"),b.Wb(),b.Sb(3,"input",6),b.Wb()),2&t){const t=b.nc(2);b.Cb(3),b.yc("value","",t.project.updatedBy.first_name," ",t.project.userId.last_name,"")}}function jn(t,e){if(1&t&&(b.Xb(0,"div",4),b.Xb(1,"mat-form-field",5),b.Xb(2,"mat-label"),b.Tc(3,"Project Name"),b.Wb(),b.Sb(4,"input",6),b.Wb(),b.Xb(5,"mat-form-field",5),b.Xb(6,"mat-label"),b.Tc(7,"Project Description"),b.Wb(),b.Xb(8,"textarea",7),b.Tc(9),b.Wb(),b.Wb(),b.Rc(10,yn,11,1,"div",8),b.Sb(11,"br"),b.Rc(12,xn,4,2,"mat-form-field",9),b.Rc(13,In,4,1,"mat-form-field",9),b.Rc(14,wn,4,2,"mat-form-field",9),b.Xb(15,"mat-form-field",5),b.Xb(16,"mat-label"),b.Tc(17,"Created At"),b.Wb(),b.Sb(18,"input",6),b.oc(19,"date"),b.Wb(),b.Xb(20,"mat-form-field",5),b.Xb(21,"mat-label"),b.Tc(22,"Updated At"),b.Wb(),b.Sb(23,"input",6),b.oc(24,"date"),b.Wb(),b.Xb(25,"mat-form-field",5),b.Xb(26,"mat-label"),b.Tc(27,"Status"),b.Wb(),b.Sb(28,"input",6),b.Wb(),b.Wb()),2&t){const t=b.nc();b.Cb(4),b.wc("value",t.project.project_name),b.Cb(5),b.Uc(t.project.project_desc),b.Cb(1),b.vc("ngIf",t.project.assignedUsers.length>0),b.Cb(2),b.vc("ngIf",t.project.userId),b.Cb(1),b.vc("ngIf",t.project.userId),b.Cb(1),b.vc("ngIf",t.project.userId),b.Cb(4),b.wc("value",b.pc(19,9,t.project.createdAt)),b.Cb(5),b.wc("value",b.pc(24,11,t.project.updatedAt)),b.Cb(5),b.wc("value",t.project.status)}}let Sn=(()=>{class t{constructor(t,e,n,i,a,o){this.orderService=t,this.route=e,this.dialogRef=n,this.router=i,this.dialog=a,this.isLoading=!0,this.project=[],this.data=[],this.sankBardata={},this.assignedUsers=[],this.isEdit=!0,this.toppingList=["Extra cheese","Mushroom","Onion","Pepperoni","Sausage","Tomato"],this.data=o}ngOnInit(){this.isLoading=!0,this.orderService.getOrderById(this.data.id).subscribe(t=>{this.isLoading=!1,this.project=t.data[0]})}close(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(b.Rb(tn),b.Rb(r.a),b.Rb(s.h),b.Rb(r.b),b.Rb(s.b),b.Rb(s.a))},t.\u0275cmp=b.Lb({type:t,selectors:[["app-courier-info"]],decls:8,vars:1,consts:[["mat-dialog-title",""],["class","font","mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-dialog-content","",1,"font"],["appearance","outline"],["matInput","","readonly","",3,"value"],["matInput","","type","text","readonly",""],["class","container",4,"ngIf"],["appearance","outline",4,"ngIf"],[1,"container"],[1,"row"],["md-list-icon",""],["chipList",""],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(b.Xb(0,"div"),b.Xb(1,"h2",0),b.Tc(2,"Project Info"),b.Wb(),b.Wb(),b.Rc(3,jn,29,13,"div",1),b.Xb(4,"div",2),b.Xb(5,"button",3),b.jc("click",(function(){return e.close()})),b.Tc(6,"Close"),b.Wb(),b.Tc(7,"\xa0 "),b.Wb()),2&t&&(b.Cb(3),b.vc("ngIf",!e.isLoading))},directives:[s.i,i.m,s.c,X.b,s.f,_.c,_.g,k.b,M.a,T.b,i.l,T.a],pipes:[i.e],styles:[".form[_ngcontent-%COMP%]{line-height:normal}.mat-card[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}.mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:16px;border-radius:4px;height:auto;min-height:598px}mat-spinner[_ngcontent-%COMP%]{margin:auto}.image-preview[_ngcontent-%COMP%]{height:5rem;margin:1rem 0}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.select_role[_ngcontent-%COMP%]{width:auto}.btn-success[_ngcontent-%COMP%]:hover{color:#0747a6!important;background-color:#fff!important;border-color:#0747a6!important}.btn-success[_ngcontent-%COMP%]{color:#fff!important;background-color:#0747a6!important;border-color:#0747a6!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#fff!important;color:#f89b46}.mat-raised-button[disabled][_ngcontent-%COMP%]:not([class*=mat-elevation-z]){color:#b3b7bd!important;background-color:#fff!important;border-color:red!important}.mat-fab.mat-primary[_ngcontent-%COMP%], .mat-flat-button.mat-primary[_ngcontent-%COMP%], .mat-mini-fab.mat-primary[_ngcontent-%COMP%], .mat-raised-button.mat-primary[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important}"]}),t})();function Rn(t,e){if(1&t&&(b.Xb(0,"mat-option",28),b.Tc(1),b.Wb()),2&t){const t=e.$implicit;b.vc("value",t.title),b.Cb(1),b.Vc(" ",t.title," ")}}function Un(t,e){if(1&t){const t=b.Yb();b.Xb(0,"button",29),b.jc("click",(function(){return b.Kc(t),b.nc().openDialog(0,"create")})),b.Tc(1,"+ New Order"),b.Wb()}}function Dn(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-icon",30),b.jc("click",(function(){return b.Kc(t),b.nc().changeView()})),b.Tc(1,"line_style"),b.Wb()}}function Fn(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-icon",30),b.jc("click",(function(){return b.Kc(t),b.nc().changeView()})),b.Tc(1,"view_module"),b.Wb()}}function Ln(t,e){1&t&&(b.Xb(0,"th",48),b.Tc(1,"Name"),b.Wb())}function An(t,e){if(1&t&&(b.Xb(0,"td",49),b.Tc(1),b.Wb()),2&t){const t=e.$implicit;b.Cb(1),b.Wc(" ",t.first_name," ",t.name," ")}}function zn(t,e){1&t&&(b.Xb(0,"th",48),b.Tc(1,"Description"),b.Wb())}function En(t,e){if(1&t&&(b.Xb(0,"td",49),b.Tc(1),b.Wb()),2&t){const t=e.$implicit;b.Cb(1),b.Uc(t.desc)}}function $n(t,e){1&t&&(b.Xb(0,"th",48),b.Tc(1,"OrderId"),b.Wb())}function Bn(t,e){if(1&t&&(b.Xb(0,"td",49),b.Tc(1),b.Wb()),2&t){const t=e.$implicit;b.Cb(1),b.Uc(t.orderId)}}function qn(t,e){1&t&&(b.Xb(0,"th",48),b.Tc(1,"Mobile"),b.Wb())}function Kn(t,e){if(1&t&&(b.Xb(0,"td",49),b.Tc(1),b.Wb()),2&t){const t=e.$implicit;b.Cb(1),b.Uc(t.mobile)}}function Gn(t,e){1&t&&(b.Xb(0,"th",48),b.Tc(1,"Amount"),b.Wb())}function Vn(t,e){if(1&t&&(b.Xb(0,"td",50),b.Tc(1),b.Wb()),2&t){const t=e.$implicit;b.yc("matTooltip","Amount: ",t.amount," (Quantity: ",t.qty,")"),b.Cb(1),b.Wc("",t.amount," (",t.qty,")")}}function Nn(t,e){1&t&&(b.Xb(0,"th",48),b.Tc(1,"Status"),b.Wb())}function Yn(t,e){if(1&t&&(b.Xb(0,"mat-option",28),b.Tc(1),b.Wb()),2&t){const t=e.$implicit;b.vc("value",t),b.Cb(1),b.Vc(" ",t," ")}}function Hn(t,e){1&t&&(b.Xb(0,"mat-error"),b.Tc(1,"Please choose order type."),b.Wb())}function Zn(t,e){if(1&t){const t=b.Yb();b.Xb(0,"td",49),b.Xb(1,"mat-form-field",17),b.Xb(2,"mat-label"),b.Tc(3,"Status"),b.Wb(),b.Xb(4,"mat-select",51,52),b.jc("selectionChange",(function(){b.Kc(t);const n=e.$implicit,i=b.Gc(5);return b.nc(2).onChangeStatus(i.value,n._id)}))("ngModelChange",(function(n){return b.Kc(t),e.$implicit.status=n})),b.Rc(6,Yn,2,2,"mat-option",20),b.Wb(),b.Rc(7,Hn,2,0,"mat-error",24),b.Wb(),b.Wb()}if(2&t){const t=e.$implicit,n=b.Gc(5),i=b.nc(2);b.Cb(4),b.vc("ngModel",t.status),b.Cb(2),b.vc("ngForOf",i.services),b.Cb(1),b.vc("ngIf",n.hasError("required"))}}function Qn(t,e){1&t&&(b.Xb(0,"th",48),b.Tc(1,"CreatedAt"),b.Wb())}function Jn(t,e){if(1&t&&(b.Xb(0,"td",49),b.Tc(1),b.oc(2,"date"),b.Wb()),2&t){const t=e.$implicit;b.Cb(1),b.Uc(b.pc(2,1,t.createdAt))}}function ti(t,e){1&t&&(b.Xb(0,"th",48),b.Tc(1,"UpdatedAt"),b.Wb())}function ei(t,e){if(1&t&&(b.Xb(0,"td",49),b.Tc(1),b.oc(2,"date"),b.Wb()),2&t){const t=e.$implicit;b.Cb(1),b.Uc(b.pc(2,1,t.updatedAt))}}function ni(t,e){1&t&&(b.Xb(0,"th",53),b.Tc(1,"Action"),b.Wb())}function ii(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-icon",57),b.jc("click",(function(){b.Kc(t);const e=b.nc().$implicit;return b.nc(2).openDialog(e._id,"edit")})),b.Tc(1,"edit"),b.Wb()}}function ai(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-icon",58),b.jc("click",(function(){b.Kc(t);const e=b.nc().$implicit;return b.nc(2).onDelete(e._id)})),b.Tc(1,"delete"),b.Wb()}}function oi(t,e){if(1&t&&(b.Xb(0,"td",54),b.Rc(1,ii,2,0,"mat-icon",55),b.Rc(2,ai,2,0,"mat-icon",56),b.Wb()),2&t){const t=b.nc(2);b.Cb(1),b.vc("ngIf",3!==t.userData.role),b.Cb(1),b.vc("ngIf",3!==t.userData.role)}}function ci(t,e){1&t&&b.Sb(0,"tr",59)}function ri(t,e){1&t&&b.Sb(0,"tr",60)}function si(t,e){if(1&t&&(b.Xb(0,"table",31),b.Vb(1,32),b.Rc(2,Ln,2,0,"th",33),b.Rc(3,An,2,2,"td",34),b.Ub(),b.Vb(4,35),b.Rc(5,zn,2,0,"th",33),b.Rc(6,En,2,1,"td",34),b.Ub(),b.Vb(7,36),b.Rc(8,$n,2,0,"th",33),b.Rc(9,Bn,2,1,"td",34),b.Ub(),b.Vb(10,37),b.Rc(11,qn,2,0,"th",33),b.Rc(12,Kn,2,1,"td",34),b.Ub(),b.Vb(13,38),b.Rc(14,Gn,2,0,"th",33),b.Rc(15,Vn,2,4,"td",39),b.Ub(),b.Vb(16,40),b.Rc(17,Nn,2,0,"th",33),b.Rc(18,Zn,8,3,"td",34),b.Ub(),b.Vb(19,41),b.Rc(20,Qn,2,0,"th",33),b.Rc(21,Jn,3,3,"td",34),b.Ub(),b.Vb(22,42),b.Rc(23,ti,2,0,"th",33),b.Rc(24,ei,3,3,"td",34),b.Ub(),b.Vb(25,43),b.Rc(26,ni,2,0,"th",44),b.Rc(27,oi,3,2,"td",45),b.Ub(),b.Rc(28,ci,1,0,"tr",46),b.Rc(29,ri,1,0,"tr",47),b.Wb()),2&t){const t=b.nc();b.vc("dataSource",t.orders),b.Cb(28),b.vc("matHeaderRowDef",t.displayedColumns),b.Cb(1),b.vc("matRowDefColumns",t.displayedColumns)}}function li(t,e){if(1&t&&(b.Xb(0,"mat-card-subtitle"),b.Tc(1),b.Wb()),2&t){const t=b.nc().$implicit;b.Cb(1),b.Vc(" Courier Branch : ",t.branch," ")}}function di(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-icon",57),b.jc("click",(function(){b.Kc(t);const e=b.nc(2).$implicit;return b.nc(2).openDialog(e._id,"edit")})),b.Tc(1,"edit"),b.Wb()}}function bi(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-icon",58),b.jc("click",(function(){b.Kc(t);const e=b.nc(2).$implicit;return b.nc(2).onDelete(e._id)})),b.Tc(1,"delete"),b.Wb()}}function mi(t,e){if(1&t&&(b.Xb(0,"mat-card-actions"),b.Rc(1,di,2,0,"mat-icon",55),b.Rc(2,bi,2,0,"mat-icon",56),b.Wb()),2&t){const t=b.nc(3);b.Cb(1),b.vc("ngIf",3!==t.userData.role),b.Cb(1),b.vc("ngIf",3!==t.userData.role)}}function gi(t,e){if(1&t&&(b.Xb(0,"mat-card",63),b.Xb(1,"div",1),b.Xb(2,"div",16),b.Xb(3,"mat-card-header"),b.Xb(4,"mat-card-title"),b.Tc(5),b.Wb(),b.Xb(6,"mat-card-subtitle"),b.Tc(7),b.Wb(),b.Xb(8,"mat-card-subtitle"),b.Tc(9),b.Wb(),b.Wb(),b.Wb(),b.Xb(10,"div",16),b.Xb(11,"div",1),b.Xb(12,"div",16),b.Xb(13,"mat-card-header"),b.Xb(14,"mat-card-subtitle",64),b.Tc(15),b.Wb(),b.Xb(16,"mat-card-subtitle",64),b.Tc(17),b.Wb(),b.Rc(18,li,2,1,"mat-card-subtitle",24),b.Wb(),b.Wb(),b.Xb(19,"div",65),b.Rc(20,mi,3,2,"mat-card-actions",24),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(21,"mat-card-content",61),b.Xb(22,"div",1),b.Xb(23,"div",16),b.Xb(24,"mat-card-subtitle"),b.Tc(25,"From"),b.Wb(),b.Xb(26,"span"),b.Tc(27),b.Wb(),b.Sb(28,"br"),b.Xb(29,"span"),b.Tc(30),b.Wb(),b.Sb(31,"br"),b.Xb(32,"span"),b.Tc(33),b.Wb(),b.Tc(34,", "),b.Xb(35,"span"),b.Tc(36),b.Wb(),b.Sb(37,"br"),b.Xb(38,"span"),b.Tc(39),b.Wb(),b.Tc(40," - \xa0"),b.Xb(41,"span"),b.Tc(42),b.Wb(),b.Wb(),b.Xb(43,"div",16),b.Xb(44,"mat-card-subtitle"),b.Tc(45,"To"),b.Wb(),b.Xb(46,"span"),b.Tc(47),b.Wb(),b.Sb(48,"br"),b.Xb(49,"span"),b.Tc(50),b.Wb(),b.Sb(51,"br"),b.Xb(52,"span"),b.Tc(53),b.Wb(),b.Tc(54,", "),b.Xb(55,"span"),b.Tc(56),b.Wb(),b.Sb(57,"br"),b.Xb(58,"span"),b.Tc(59),b.Wb(),b.Tc(60," - \xa0"),b.Xb(61,"span"),b.Tc(62),b.Wb(),b.Wb(),b.Wb(),b.Xb(63,"div",66),b.Xb(64,"mat-card-subtitle"),b.Tc(65),b.Wb(),b.Wb(),b.Wb(),b.Wb()),2&t){const t=e.$implicit,n=b.nc(2);b.Cb(5),b.Vc("Order : ",t.name,""),b.Cb(2),b.Vc(" OrderId : ",t.orderId," "),b.Cb(2),b.Vc(" Mobile : ",t.mobile," "),b.Cb(5),b.yc("matTooltip","Amount: ",t.amount," (Quantity: ",t.qty,")"),b.Cb(1),b.Wc(" Amount : Rs:",t.amount,"/- (Quantity : ",t.qty,") "),b.Cb(1),b.yc("matTooltip","Amount: ",t.amount," (Quantity: ",t.qty,")"),b.Cb(1),b.Wc(" Status : ",t.status," / Courier type : ",t.type," "),b.Cb(1),b.vc("ngIf",t.branch),b.Cb(2),b.vc("ngIf",4!==n.userData.role),b.Cb(7),b.Uc(t.from.from_address),b.Cb(3),b.Uc(t.from.from_address),b.Cb(3),b.Uc(t.from.from_state),b.Cb(3),b.Uc(t.from.from_city),b.Cb(3),b.Uc(t.from.from_country),b.Cb(3),b.Uc(t.from.from_zip_code),b.Cb(5),b.Uc(t.to.to_address),b.Cb(3),b.Uc(t.to.to_address),b.Cb(3),b.Uc(t.to.to_state),b.Cb(3),b.Uc(t.to.to_city),b.Cb(3),b.Uc(t.to.to_country),b.Cb(3),b.Uc(t.to.to_zip_code),b.Cb(3),b.Vc(" Description : ",t.desc," ")}}function pi(t,e){if(1&t&&(b.Xb(0,"section"),b.Xb(1,"div",61),b.Rc(2,gi,66,26,"mat-card",62),b.Wb(),b.Wb()),2&t){const t=b.nc();b.Cb(2),b.vc("ngForOf",t.orders)}}function ui(t,e){1&t&&(b.Xb(0,"p",67),b.Tc(1,"No Orders Found!"),b.Wb())}function fi(t,e){1&t&&b.Sb(0,"mat-progress-spinner",68)}function hi(t,e){if(1&t){const t=b.Yb();b.Xb(0,"mat-paginator",69),b.jc("page",(function(e){return b.Kc(t),b.nc().onChangedPage(e)})),b.Wb()}if(2&t){const t=b.nc();b.vc("length",t.Count)("pageSize",t.perPage)("pageSizeOptions",t.sizeOptions)}}const Ci=[{path:"projects",component:it},{path:"orders",component:(()=>{class t{constructor(t,e,n,i,a){this.orderService=t,this.route=e,this.authService=n,this.dialog=i,this.router=a,this.orders=[],this.isLoading=!1,this.viewType=!1,this.perPage=10,this.currentPage=1,this.Count=0,this.sizeOptions=[10,20,50],this.displayedColumns=["Name","Description","OrderId","Mobile","Amount","Status","CreatedAt","UpdatedAt","Action"],this.filterTypes=[{title:"Confirmed",id:1},{title:"Shipped",id:2},{title:"Faild to Ship",id:3},{title:"Out for Delivery",id:4},{title:"Delivered",id:5},{title:"Failed to Deliver",id:4}],this.services=["Confirmed","Shipped","Faild to Ship","Out for Delivery","Delivered","Failed to Deliver"];const o=new Date,c=(o.getMonth(),o.getFullYear());o.getDate(),this.start_date=new Date(c+"/01/01"),this.end_date=new Date(c+"/12/31")}ngOnInit(){this.isLoading=!0,this.userData=this.authService.getUserData(),this.orderService.getOrders(this.orderId,this.perPage,this.currentPage,this.filter,this.start_date,this.end_date).subscribe(t=>{this.orders=t.data,this.Count=t.count,this.isLoading=!1})}onDelete(t){this.orderService.deleteOrder(t).subscribe(t=>{this.ngOnInit()})}onSearch(){this.ngOnInit()}changeView(){this.viewType=!this.viewType}checkChangesDates(t,e){"startDate"==t&&(this.start_date=e.value),"endDate"==t&&(this.end_date=e.value),this.ngOnInit()}onChangeFilter(){this.isLoading=!0,this.ngOnInit()}onChangedPage(t){this.isLoading=!0,this.currentPage=t.pageIndex+1,this.perPage=t.pageSize,this.ngOnInit()}onChangeStatus(t,e){this.orderService.updateOrderStatus(t,e).subscribe(t=>{this.ngOnInit()})}openDialog(t,e){const n=new s.e;n.disableClose=!0,n.autoFocus=!0,n.width="948px",n.data={id:t,mode:e},this.dialog.open(Pn,n).afterClosed().subscribe(t=>{this.ngOnInit()})}projectInfoDialog(t){const e=new s.e;e.disableClose=!1,e.autoFocus=!0,e.width="598px",e.data={id:t},this.dialog.open(Sn,e).afterClosed().subscribe(t=>{this.ngOnInit()})}}return t.\u0275fac=function(e){return new(e||t)(b.Rb(tn),b.Rb(r.a),b.Rb(f.a),b.Rb(s.b),b.Rb(r.b))},t.\u0275cmp=b.Lb({type:t,selectors:[["app-couriers"]],decls:47,vars:17,consts:[[1,"card-container"],[1,"row"],[1,"col-md-4"],["action","#","autocomplete","off"],["appearance","outline",2,"width","100%"],["matInput","","name","name","type","text","placeholder","Search orderId (, separated)",3,"ngModel","ngModelChange","keyup.enter"],["nameInput","ngModel"],["matSuffix",""],["matInput","","readonly","","name","start_date","placeholder","Select Start Date","required","",3,"matDatepicker","ngModel","dateChange","ngModelChange"],["sdataInput","ngModel"],["matSuffix","",3,"for"],["disabled","false"],["picker",""],["matInput","","readonly","","name","end_date","placeholder","Select End Date","required","",3,"matDatepicker","ngModel","dateChange","ngModelChange"],["edataInput","ngModel"],["picker1",""],[1,"col-md-6"],["appearance","outline"],["name","shift","placeholder","Select Filter",3,"ngModel","selectionChange","ngModelChange"],["filterInput","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","btn btn-success float-right",3,"click",4,"ngIf"],["style","float: right;","matTooltip","Change View",3,"click",4,"ngIf"],["mat-table","","role","grid","class","mat-elevation-z8 table-striped",3,"dataSource",4,"ngIf"],[4,"ngIf"],["class","info-text mat-body-1",4,"ngIf"],["class","example-margin","mode","indeterminate","diameter","20","value","20",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],[3,"value"],[1,"btn","btn-success","float-right",3,"click"],["matTooltip","Change View",2,"float","right",3,"click"],["mat-table","","role","grid",1,"mat-elevation-z8","table-striped",3,"dataSource"],["matColumnDef","Name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Description"],["matColumnDef","OrderId"],["matColumnDef","Mobile"],["matColumnDef","Amount"],["mat-cell","",3,"matTooltip",4,"matCellDef"],["matColumnDef","Status"],["matColumnDef","CreatedAt"],["matColumnDef","UpdatedAt"],["matColumnDef","Action"],["mat-header-cell","","style","text-align: center;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",3,"matTooltip"],["name","status","placeholder","Status","required","",3,"ngModel","selectionChange","ngModelChange"],["typeInput","ngModel"],["mat-header-cell","",2,"text-align","center"],["mat-cell","",2,"text-align","center"],["md-list-icon","","color","primary","matTooltip","Edit Project",3,"click",4,"ngIf"],["matTooltip","Delete Project","color","warn","md-list-icon","",3,"click",4,"ngIf"],["md-list-icon","","color","primary","matTooltip","Edit Project",3,"click"],["matTooltip","Delete Project","color","warn","md-list-icon","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"container"],["class","example-card",4,"ngFor","ngForOf"],[1,"example-card"],[3,"matTooltip"],[1,"col-md-6",2,"text-align","right"],[1,"row","container"],[1,"info-text","mat-body-1"],["mode","indeterminate","diameter","20","value","20",1,"example-margin"],[3,"length","pageSize","pageSizeOptions","page"]],template:function(t,e){if(1&t&&(b.Xb(0,"div",0),b.Xb(1,"div",1),b.Xb(2,"div",2),b.Xb(3,"form",3),b.Xb(4,"mat-form-field",4),b.Xb(5,"mat-label"),b.Tc(6,"Search"),b.Wb(),b.Xb(7,"input",5,6),b.jc("ngModelChange",(function(t){return e.orderId=t}))("keyup.enter",(function(){return e.onSearch()})),b.Wb(),b.Xb(9,"mat-icon",7),b.Tc(10,"search"),b.Wb(),b.Wb(),b.Wb(),b.Wb(),b.Xb(11,"div",2),b.Xb(12,"mat-form-field",4),b.Xb(13,"mat-label"),b.Tc(14,"Start Date"),b.Wb(),b.Xb(15,"input",8,9),b.jc("dateChange",(function(t){return e.checkChangesDates("startDate",t)}))("ngModelChange",(function(t){return e.start_date=t})),b.Wb(),b.Sb(17,"mat-datepicker-toggle",10),b.Sb(18,"mat-datepicker",11,12),b.Wb(),b.Wb(),b.Xb(20,"div",2),b.Xb(21,"mat-form-field",4),b.Xb(22,"mat-label"),b.Tc(23,"End Date"),b.Wb(),b.Xb(24,"input",13,14),b.jc("dateChange",(function(t){return e.checkChangesDates("edataInput",t)}))("ngModelChange",(function(t){return e.end_date=t})),b.Wb(),b.Sb(26,"mat-datepicker-toggle",10),b.Sb(27,"mat-datepicker",11,15),b.Wb(),b.Wb(),b.Wb(),b.Xb(29,"div",1),b.Xb(30,"div",16),b.Xb(31,"mat-form-field",17),b.Xb(32,"mat-label"),b.Tc(33,"Filter"),b.Wb(),b.Xb(34,"mat-select",18,19),b.jc("selectionChange",(function(){return e.onChangeFilter()}))("ngModelChange",(function(t){return e.filter=t})),b.Rc(36,Rn,2,2,"mat-option",20),b.Wb(),b.Wb(),b.Wb(),b.Xb(37,"div",16),b.Rc(38,Un,2,0,"button",21),b.Wb(),b.Wb(),b.Wb(),b.Rc(39,Dn,2,0,"mat-icon",22),b.Rc(40,Fn,2,0,"mat-icon",22),b.Rc(41,si,30,3,"table",23),b.Rc(42,pi,3,1,"section",24),b.Xb(43,"div",0),b.Rc(44,ui,2,0,"p",25),b.Rc(45,fi,1,0,"mat-progress-spinner",26),b.Wb(),b.Rc(46,hi,1,3,"mat-paginator",27)),2&t){const t=b.Gc(19),n=b.Gc(28);b.Cb(7),b.vc("ngModel",e.orderId),b.Cb(8),b.vc("matDatepicker",t)("ngModel",e.start_date),b.Cb(2),b.vc("for",t),b.Cb(7),b.vc("matDatepicker",n)("ngModel",e.end_date),b.Cb(2),b.vc("for",n),b.Cb(8),b.vc("ngModel",e.filter),b.Cb(2),b.vc("ngForOf",e.filterTypes),b.Cb(2),b.vc("ngIf",3!=e.userData.role),b.Cb(1),b.vc("ngIf",!e.viewType),b.Cb(1),b.vc("ngIf",e.viewType),b.Cb(1),b.vc("ngIf",!e.viewType),b.Cb(1),b.vc("ngIf",e.viewType&&e.orders.length),b.Cb(2),b.vc("ngIf",e.orders.length<=0),b.Cb(1),b.vc("ngIf",e.isLoading),b.Cb(1),b.vc("ngIf",e.orders.length>0)}},directives:[c.x,c.n,c.o,_.c,_.g,k.b,c.b,c.m,c.p,M.a,_.h,Mt.b,c.u,Mt.d,Mt.a,rt.a,i.l,i.m,P.o,G.a,Se.j,Se.c,Se.e,Se.b,Se.g,Se.i,Se.d,Se.a,_.b,Se.f,Se.h,K.a,K.e,K.j,K.i,K.d,K.b,V.a,N.a],pipes:[i.e],styles:[".mat-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);display:block;position:relative;padding:16px;border-radius:4px;height:70px}mat-form-field[_ngcontent-%COMP%]{height:57px}.btn.focus[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]:focus{outline:0;box-shadow:0 0 0 .2rem #fff}.btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .show[_ngcontent-%COMP%] > .btn-success.dropdown-toggle[_ngcontent-%COMP%]{color:#fff;background-color:#f89b46;border-color:#f89b46}.btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .btn-success[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .show[_ngcontent-%COMP%] > .btn-success.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #fafafa}.mat-input-element[_ngcontent-%COMP%]:focus{font:inherit;color:#f89b46;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.btn-success[_ngcontent-%COMP%]{color:#f89b46;background-color:#fff;border-color:#f89b46}table[_ngcontent-%COMP%]{margin:27px}mat-paginator[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:98%}.btn-success[_ngcontent-%COMP%]:hover{color:#fff;background-color:#f89b46;border-color:#f89b46}.btn-success.focus[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]:focus{color:#fff!important;background-color:#f89b46!important;border-color:#f89b46!important;box-shadow:#f89b46!important}.example-card[_ngcontent-%COMP%]{width:100%;margin:15px}.example-header-image[_ngcontent-%COMP%]{background-image:url(/assets/proj.jpg);background-size:cover}mat-card-subtitle[_ngcontent-%COMP%], mat-card-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.example-tooltip-red[_ngcontent-%COMP%]{background:#b71c1c!important}.mat-card[_ngcontent-%COMP%]{background:#fff;width:100%;color:#f89b46;height:auto;min-width:100%}mat-icon[_ngcontent-%COMP%]{margin:9px}"]}),t})()},{path:"tickets/:pid",component:Ze},{path:"",redirectTo:"projects",pathMatch:"full"}];let vi=(()=>{class t{}return t.\u0275mod=b.Pb({type:t}),t.\u0275inj=b.Ob({factory:function(e){return new(e||t)},imports:[[r.f.forChild(Ci)],r.f]}),t})();n.d(e,"SharedModule",(function(){return _i}));let _i=(()=>{class t{}return t.\u0275mod=b.Pb({type:t}),t.\u0275inj=b.Ob({factory:function(e){return new(e||t)},imports:[[i.c,c.g,a.b,c.t,o.a,vi]]}),t})()}}]);